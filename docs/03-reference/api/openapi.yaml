openapi: 3.0.3
info:
  title: ConsultantPro API
  version: 1.0.0
  description: Quote-to-Cash Management Platform for Management Consulting Firms
paths:
  /api/assets/assets/:
    get:
      operationId: assets_assets_list
      description: |-
        ViewSet for Asset model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - assets
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedAssetList'
          description: ''
    post:
      operationId: assets_assets_create
      description: |-
        ViewSet for Asset model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - assets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssetRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AssetRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AssetRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Asset'
          description: ''
  /api/assets/assets/{id}/:
    get:
      operationId: assets_assets_retrieve
      description: |-
        ViewSet for Asset model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - assets
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Asset'
          description: ''
    put:
      operationId: assets_assets_update
      description: |-
        ViewSet for Asset model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - assets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssetRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AssetRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AssetRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Asset'
          description: ''
    patch:
      operationId: assets_assets_partial_update
      description: |-
        ViewSet for Asset model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - assets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedAssetRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedAssetRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedAssetRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Asset'
          description: ''
    delete:
      operationId: assets_assets_destroy
      description: |-
        ViewSet for Asset model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - assets
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/assets/maintenance-logs/:
    get:
      operationId: assets_maintenance_logs_list
      description: |-
        ViewSet for MaintenanceLog model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - assets
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMaintenanceLogList'
          description: ''
    post:
      operationId: assets_maintenance_logs_create
      description: |-
        ViewSet for MaintenanceLog model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - assets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MaintenanceLogRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MaintenanceLogRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MaintenanceLogRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaintenanceLog'
          description: ''
  /api/assets/maintenance-logs/{id}/:
    get:
      operationId: assets_maintenance_logs_retrieve
      description: |-
        ViewSet for MaintenanceLog model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - assets
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaintenanceLog'
          description: ''
    put:
      operationId: assets_maintenance_logs_update
      description: |-
        ViewSet for MaintenanceLog model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - assets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MaintenanceLogRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MaintenanceLogRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MaintenanceLogRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaintenanceLog'
          description: ''
    patch:
      operationId: assets_maintenance_logs_partial_update
      description: |-
        ViewSet for MaintenanceLog model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - assets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedMaintenanceLogRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedMaintenanceLogRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedMaintenanceLogRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaintenanceLog'
          description: ''
    delete:
      operationId: assets_maintenance_logs_destroy
      description: |-
        ViewSet for MaintenanceLog model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - assets
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/auth/change-password/:
    put:
      operationId: auth_change_password_update
      description: |-
        Change password endpoint.

        PUT /api/auth/change-password/
        {
            "old_password": "OldPass123!",
            "new_password": "NewPass456!"
        }
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          description: No response body
    patch:
      operationId: auth_change_password_partial_update
      description: |-
        Change password endpoint.

        PUT /api/auth/change-password/
        {
            "old_password": "OldPass123!",
            "new_password": "NewPass456!"
        }
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedChangePasswordRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedChangePasswordRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedChangePasswordRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          description: No response body
  /api/auth/login/:
    post:
      operationId: auth_login_create
      description: |-
        User login endpoint.

        POST /api/auth/login/
        {
            "username": "john_doe",
            "password": "SecurePass123!"
        }
      tags:
      - auth
      security:
      - jwtAuth: []
      - cookieAuth: []
      - {}
      responses:
        '200':
          description: No response body
  /api/auth/logout/:
    post:
      operationId: auth_logout_create
      description: |-
        User logout endpoint.

        POST /api/auth/logout/
        {
            "refresh": "refresh_token_here"
        }
      tags:
      - auth
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          description: No response body
  /api/auth/profile/:
    get:
      operationId: auth_profile_retrieve
      description: |-
        Get current user profile.

        GET /api/auth/profile/
      tags:
      - auth
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          description: No response body
  /api/auth/register/:
    post:
      operationId: auth_register_create
      description: |-
        User registration endpoint.

        POST /api/auth/register/
        {
            "username": "john_doe",
            "email": "john@example.com",
            "first_name": "John",
            "last_name": "Doe",
            "password": "SecurePass123!",
            "password2": "SecurePass123!"
        }
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Register'
          description: ''
  /api/auth/token/refresh/:
    post:
      operationId: auth_token_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
  /api/clients/chat-threads/:
    get:
      operationId: clients_chat_threads_list
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientChatThreadList'
          description: ''
    post:
      operationId: clients_chat_threads_create
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
  /api/clients/chat-threads/{id}/:
    get:
      operationId: clients_chat_threads_retrieve
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
    put:
      operationId: clients_chat_threads_update
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
    patch:
      operationId: clients_chat_threads_partial_update
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientChatThreadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientChatThreadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientChatThreadRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
    delete:
      operationId: clients_chat_threads_destroy
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/clients/chat-threads/{id}/archive/:
    post:
      operationId: clients_chat_threads_archive_create
      description: |-
        Archive a chat thread.

        Only accessible to firm users.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
  /api/clients/chat-threads/active/:
    get:
      operationId: clients_chat_threads_active_retrieve
      description: |-
        Get or create today's active thread for the client.

        Returns the active thread with recent messages.
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
  /api/clients/clients/:
    get:
      operationId: clients_clients_list
      description: |-
        ViewSet for Client management (Post-sale).

        Provides CRUD operations for clients that have been converted from prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientList'
          description: ''
    post:
      operationId: clients_clients_create
      description: |-
        ViewSet for Client management (Post-sale).

        Provides CRUD operations for clients that have been converted from prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
          description: ''
  /api/clients/clients/{id}/:
    get:
      operationId: clients_clients_retrieve
      description: |-
        ViewSet for Client management (Post-sale).

        Provides CRUD operations for clients that have been converted from prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
          description: ''
    put:
      operationId: clients_clients_update
      description: |-
        ViewSet for Client management (Post-sale).

        Provides CRUD operations for clients that have been converted from prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
          description: ''
    patch:
      operationId: clients_clients_partial_update
      description: |-
        ViewSet for Client management (Post-sale).

        Provides CRUD operations for clients that have been converted from prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
          description: ''
    delete:
      operationId: clients_clients_destroy
      description: |-
        ViewSet for Client management (Post-sale).

        Provides CRUD operations for clients that have been converted from prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/clients/clients/{id}/disable_portal/:
    post:
      operationId: clients_clients_disable_portal_create
      description: Disable client portal access for this client.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
          description: ''
  /api/clients/clients/{id}/enable_portal/:
    post:
      operationId: clients_clients_enable_portal_create
      description: Enable client portal access for this client.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
          description: ''
  /api/clients/clients/{id}/overview/:
    get:
      operationId: clients_clients_overview_retrieve
      description: |-
        Get comprehensive client overview.

        Returns client details plus related projects, invoices, and engagements.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
          description: ''
  /api/clients/comments/:
    get:
      operationId: clients_comments_list
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientCommentList'
          description: ''
    post:
      operationId: clients_comments_create
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
  /api/clients/comments/{id}/:
    get:
      operationId: clients_comments_retrieve
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
    put:
      operationId: clients_comments_update
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
    patch:
      operationId: clients_comments_partial_update
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientCommentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientCommentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientCommentRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
    delete:
      operationId: clients_comments_destroy
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/clients/comments/{id}/mark_as_read/:
    post:
      operationId: clients_comments_mark_as_read_create
      description: |-
        Mark a client comment as read by firm team.

        Only accessible to firm users (not client portal users).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
  /api/clients/comments/unread/:
    get:
      operationId: clients_comments_unread_retrieve
      description: |-
        Get all unread client comments.

        Only accessible to firm users.
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
  /api/clients/contracts/:
    get:
      operationId: clients_contracts_list
      description: |-
        ViewSet for Client Portal - Contracts (read-only).

        Shows active and historical contracts for the client.
        Includes contract document download links.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientContractList'
          description: ''
  /api/clients/contracts/{id}/:
    get:
      operationId: clients_contracts_retrieve
      description: |-
        ViewSet for Client Portal - Contracts (read-only).

        Shows active and historical contracts for the client.
        Includes contract document download links.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientContract'
          description: ''
  /api/clients/contracts/{id}/download/:
    get:
      operationId: clients_contracts_download_retrieve
      description: |-
        Get download link for contract document.

        Returns the S3 URL for the signed contract PDF.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientContract'
          description: ''
  /api/clients/engagement-history/:
    get:
      operationId: clients_engagement_history_list
      description: |-
        ViewSet for Client Portal - Engagement History (read-only).

        Shows engagement version history with renewal tracking.
        Displays the full engagement timeline for the client.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientEngagementDetailList'
          description: ''
  /api/clients/engagement-history/{id}/:
    get:
      operationId: clients_engagement_history_retrieve
      description: |-
        ViewSet for Client Portal - Engagement History (read-only).

        Shows engagement version history with renewal tracking.
        Displays the full engagement timeline for the client.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientEngagementDetail'
          description: ''
  /api/clients/engagement-history/timeline/:
    get:
      operationId: clients_engagement_history_timeline_retrieve
      description: |-
        Get engagement timeline visualization data.

        Returns all engagements ordered by version for timeline display.
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientEngagementDetail'
          description: ''
  /api/clients/engagements/:
    get:
      operationId: clients_engagements_list
      description: |-
        ViewSet for Client Engagements.

        Tracks all contracts/engagements with version history.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientEngagementList'
          description: ''
    post:
      operationId: clients_engagements_create
      description: |-
        ViewSet for Client Engagements.

        Tracks all contracts/engagements with version history.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientEngagementRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientEngagementRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientEngagementRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientEngagement'
          description: ''
  /api/clients/engagements/{id}/:
    get:
      operationId: clients_engagements_retrieve
      description: |-
        ViewSet for Client Engagements.

        Tracks all contracts/engagements with version history.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientEngagement'
          description: ''
    put:
      operationId: clients_engagements_update
      description: |-
        ViewSet for Client Engagements.

        Tracks all contracts/engagements with version history.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientEngagementRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientEngagementRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientEngagementRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientEngagement'
          description: ''
    patch:
      operationId: clients_engagements_partial_update
      description: |-
        ViewSet for Client Engagements.

        Tracks all contracts/engagements with version history.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientEngagementRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientEngagementRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientEngagementRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientEngagement'
          description: ''
    delete:
      operationId: clients_engagements_destroy
      description: |-
        ViewSet for Client Engagements.

        Tracks all contracts/engagements with version history.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/clients/engagements/by_client/:
    get:
      operationId: clients_engagements_by_client_retrieve
      description: |-
        Get all engagements for a specific client.

        TIER 0: Queryset already firm-scoped via get_queryset().
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientEngagement'
          description: ''
  /api/clients/invoices/:
    get:
      operationId: clients_invoices_list
      description: |-
        ViewSet for Client Portal - Invoices (read-only).

        Shows invoices for the authenticated client portal user.
        Clients can view their invoices but cannot modify them.
        Includes payment link generation for Stripe.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientInvoiceList'
          description: ''
  /api/clients/invoices/{id}/:
    get:
      operationId: clients_invoices_retrieve
      description: |-
        ViewSet for Client Portal - Invoices (read-only).

        Shows invoices for the authenticated client portal user.
        Clients can view their invoices but cannot modify them.
        Includes payment link generation for Stripe.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientInvoice'
          description: ''
  /api/clients/invoices/{id}/generate_payment_link/:
    post:
      operationId: clients_invoices_generate_payment_link_create
      description: |-
        Generate Stripe payment link for an invoice.

        Returns a Stripe Checkout session URL that the client can use to pay.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientInvoice'
          description: ''
  /api/clients/invoices/summary/:
    get:
      operationId: clients_invoices_summary_retrieve
      description: |-
        Get invoice summary for the client.

        Returns counts and totals by status.
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientInvoice'
          description: ''
  /api/clients/messages/:
    get:
      operationId: clients_messages_list
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientMessageList'
          description: ''
    post:
      operationId: clients_messages_create
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
  /api/clients/messages/{id}/:
    get:
      operationId: clients_messages_retrieve
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
    put:
      operationId: clients_messages_update
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
    patch:
      operationId: clients_messages_partial_update
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientMessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientMessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientMessageRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
    delete:
      operationId: clients_messages_destroy
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/clients/messages/{id}/mark_as_read/:
    post:
      operationId: clients_messages_mark_as_read_create
      description: |-
        Mark a message as read.

        Accessible to both clients and firm users.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
  /api/clients/messages/unread/:
    get:
      operationId: clients_messages_unread_retrieve
      description: |-
        Get unread messages for the current user.

        For clients: get unread messages from firm
        For firm: get unread messages from all clients
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
  /api/clients/notes/:
    get:
      operationId: clients_notes_list
      description: |-
        ViewSet for Client Notes (internal only).

        Notes are NOT visible to clients - for internal team use only.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (internal firm use only).
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientNoteList'
          description: ''
    post:
      operationId: clients_notes_create
      description: |-
        ViewSet for Client Notes (internal only).

        Notes are NOT visible to clients - for internal team use only.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (internal firm use only).
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientNoteRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientNoteRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientNoteRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientNote'
          description: ''
  /api/clients/notes/{id}/:
    get:
      operationId: clients_notes_retrieve
      description: |-
        ViewSet for Client Notes (internal only).

        Notes are NOT visible to clients - for internal team use only.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (internal firm use only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientNote'
          description: ''
    put:
      operationId: clients_notes_update
      description: |-
        ViewSet for Client Notes (internal only).

        Notes are NOT visible to clients - for internal team use only.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (internal firm use only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientNoteRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientNoteRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientNoteRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientNote'
          description: ''
    patch:
      operationId: clients_notes_partial_update
      description: |-
        ViewSet for Client Notes (internal only).

        Notes are NOT visible to clients - for internal team use only.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (internal firm use only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientNoteRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientNoteRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientNoteRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientNote'
          description: ''
    delete:
      operationId: clients_notes_destroy
      description: |-
        ViewSet for Client Notes (internal only).

        Notes are NOT visible to clients - for internal team use only.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (internal firm use only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/clients/organizations/:
    get:
      operationId: clients_organizations_list
      description: |-
        ViewSet for Organization management.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.6: Organizations enable cross-client collaboration within a firm.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedOrganizationList'
          description: ''
    post:
      operationId: clients_organizations_create
      description: |-
        ViewSet for Organization management.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.6: Organizations enable cross-client collaboration within a firm.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrganizationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/OrganizationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/OrganizationRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
          description: ''
  /api/clients/organizations/{id}/:
    get:
      operationId: clients_organizations_retrieve
      description: |-
        ViewSet for Organization management.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.6: Organizations enable cross-client collaboration within a firm.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
          description: ''
    put:
      operationId: clients_organizations_update
      description: |-
        ViewSet for Organization management.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.6: Organizations enable cross-client collaboration within a firm.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrganizationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/OrganizationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/OrganizationRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
          description: ''
    patch:
      operationId: clients_organizations_partial_update
      description: |-
        ViewSet for Organization management.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.6: Organizations enable cross-client collaboration within a firm.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedOrganizationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedOrganizationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedOrganizationRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
          description: ''
    delete:
      operationId: clients_organizations_destroy
      description: |-
        ViewSet for Organization management.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2.6: Organizations enable cross-client collaboration within a firm.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/clients/portal-users/:
    get:
      operationId: clients_portal_users_list
      description: |-
        ViewSet for Client Portal User management.

        Manages client-side users with portal access.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientPortalUserList'
          description: ''
    post:
      operationId: clients_portal_users_create
      description: |-
        ViewSet for Client Portal User management.

        Manages client-side users with portal access.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientPortalUserRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientPortalUserRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientPortalUserRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientPortalUser'
          description: ''
  /api/clients/portal-users/{id}/:
    get:
      operationId: clients_portal_users_retrieve
      description: |-
        ViewSet for Client Portal User management.

        Manages client-side users with portal access.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientPortalUser'
          description: ''
    put:
      operationId: clients_portal_users_update
      description: |-
        ViewSet for Client Portal User management.

        Manages client-side users with portal access.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientPortalUserRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientPortalUserRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientPortalUserRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientPortalUser'
          description: ''
    patch:
      operationId: clients_portal_users_partial_update
      description: |-
        ViewSet for Client Portal User management.

        Manages client-side users with portal access.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientPortalUserRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientPortalUserRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientPortalUserRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientPortalUser'
          description: ''
    delete:
      operationId: clients_portal_users_destroy
      description: |-
        ViewSet for Client Portal User management.

        Manages client-side users with portal access.

        TIER 0: Firm-scoped through client__firm relationship.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/clients/projects/:
    get:
      operationId: clients_projects_list
      description: |-
        ViewSet for Client Portal - Projects (read-only).

        Shows projects for the authenticated client portal user.
        Clients can view their projects and tasks, but cannot modify them.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientProjectList'
          description: ''
  /api/clients/projects/{id}/:
    get:
      operationId: clients_projects_retrieve
      description: |-
        ViewSet for Client Portal - Projects (read-only).

        Shows projects for the authenticated client portal user.
        Clients can view their projects and tasks, but cannot modify them.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientProject'
          description: ''
  /api/clients/projects/{id}/tasks/:
    get:
      operationId: clients_projects_tasks_retrieve
      description: |-
        Get all tasks for a specific project.

        Returns tasks with client comments.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientProject'
          description: ''
  /api/clients/proposals/:
    get:
      operationId: clients_proposals_list
      description: |-
        ViewSet for Client Portal - Proposals (read-only).

        Shows proposals sent to the client.
        Clients can view proposal details but cannot modify them.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientProposalList'
          description: ''
  /api/clients/proposals/{id}/:
    get:
      operationId: clients_proposals_retrieve
      description: |-
        ViewSet for Client Portal - Proposals (read-only).

        Shows proposals sent to the client.
        Clients can view proposal details but cannot modify them.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientProposal'
          description: ''
  /api/clients/proposals/{id}/accept/:
    post:
      operationId: clients_proposals_accept_create
      description: |-
        Accept a proposal (client-side acceptance).

        This is a placeholder for e-signature integration.
        In production, this would trigger DocuSign/HelloSign workflow.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - clients
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientProposal'
          description: ''
  /api/crm/campaigns/:
    get:
      operationId: crm_campaigns_list
      description: |-
        ViewSet for Campaign management.

        Marketing campaigns for lead generation.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCampaignList'
          description: ''
    post:
      operationId: crm_campaigns_create
      description: |-
        ViewSet for Campaign management.

        Marketing campaigns for lead generation.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CampaignRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CampaignRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CampaignRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Campaign'
          description: ''
  /api/crm/campaigns/{id}/:
    get:
      operationId: crm_campaigns_retrieve
      description: |-
        ViewSet for Campaign management.

        Marketing campaigns for lead generation.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Campaign'
          description: ''
    put:
      operationId: crm_campaigns_update
      description: |-
        ViewSet for Campaign management.

        Marketing campaigns for lead generation.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CampaignRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CampaignRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CampaignRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Campaign'
          description: ''
    patch:
      operationId: crm_campaigns_partial_update
      description: |-
        ViewSet for Campaign management.

        Marketing campaigns for lead generation.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedCampaignRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedCampaignRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedCampaignRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Campaign'
          description: ''
    delete:
      operationId: crm_campaigns_destroy
      description: |-
        ViewSet for Campaign management.

        Marketing campaigns for lead generation.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/crm/campaigns/{id}/performance/:
    get:
      operationId: crm_campaigns_performance_retrieve
      description: |-
        Get campaign performance metrics.

        TIER 0: get_object() automatically verifies firm access.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Campaign'
          description: ''
  /api/crm/contracts/:
    get:
      operationId: crm_contracts_list
      description: |-
        ViewSet for Contract management.

        Signed agreements with clients.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedContractList'
          description: ''
    post:
      operationId: crm_contracts_create
      description: |-
        ViewSet for Contract management.

        Signed agreements with clients.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContractRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ContractRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ContractRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Contract'
          description: ''
  /api/crm/contracts/{id}/:
    get:
      operationId: crm_contracts_retrieve
      description: |-
        ViewSet for Contract management.

        Signed agreements with clients.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Contract'
          description: ''
    put:
      operationId: crm_contracts_update
      description: |-
        ViewSet for Contract management.

        Signed agreements with clients.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContractRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ContractRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ContractRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Contract'
          description: ''
    patch:
      operationId: crm_contracts_partial_update
      description: |-
        ViewSet for Contract management.

        Signed agreements with clients.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedContractRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedContractRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedContractRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Contract'
          description: ''
    delete:
      operationId: crm_contracts_destroy
      description: |-
        ViewSet for Contract management.

        Signed agreements with clients.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/crm/leads/:
    get:
      operationId: crm_leads_list
      description: |-
        ViewSet for Lead management (Pre-Sale).

        Leads are marketing-captured prospects before qualification.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedLeadList'
          description: ''
    post:
      operationId: crm_leads_create
      description: |-
        ViewSet for Lead management (Pre-Sale).

        Leads are marketing-captured prospects before qualification.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LeadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LeadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LeadRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Lead'
          description: ''
  /api/crm/leads/{id}/:
    get:
      operationId: crm_leads_retrieve
      description: |-
        ViewSet for Lead management (Pre-Sale).

        Leads are marketing-captured prospects before qualification.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Lead'
          description: ''
    put:
      operationId: crm_leads_update
      description: |-
        ViewSet for Lead management (Pre-Sale).

        Leads are marketing-captured prospects before qualification.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LeadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LeadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LeadRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Lead'
          description: ''
    patch:
      operationId: crm_leads_partial_update
      description: |-
        ViewSet for Lead management (Pre-Sale).

        Leads are marketing-captured prospects before qualification.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedLeadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedLeadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedLeadRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Lead'
          description: ''
    delete:
      operationId: crm_leads_destroy
      description: |-
        ViewSet for Lead management (Pre-Sale).

        Leads are marketing-captured prospects before qualification.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/crm/leads/{id}/convert_to_prospect/:
    post:
      operationId: crm_leads_convert_to_prospect_create
      description: |-
        Convert this lead to a prospect (sales pipeline).

        TIER 0: Firm context automatically applied to new Prospect.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LeadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LeadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LeadRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Lead'
          description: ''
  /api/crm/proposals/:
    get:
      operationId: crm_proposals_list
      description: |-
        ViewSet for Proposal management.

        Pre-sale proposals sent to prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProposalList'
          description: ''
    post:
      operationId: crm_proposals_create
      description: |-
        ViewSet for Proposal management.

        Pre-sale proposals sent to prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Proposal'
          description: ''
  /api/crm/proposals/{id}/:
    get:
      operationId: crm_proposals_retrieve
      description: |-
        ViewSet for Proposal management.

        Pre-sale proposals sent to prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Proposal'
          description: ''
    put:
      operationId: crm_proposals_update
      description: |-
        ViewSet for Proposal management.

        Pre-sale proposals sent to prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Proposal'
          description: ''
    patch:
      operationId: crm_proposals_partial_update
      description: |-
        ViewSet for Proposal management.

        Pre-sale proposals sent to prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProposalRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProposalRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProposalRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Proposal'
          description: ''
    delete:
      operationId: crm_proposals_destroy
      description: |-
        ViewSet for Proposal management.

        Pre-sale proposals sent to prospects.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/crm/proposals/{id}/accept/:
    post:
      operationId: crm_proposals_accept_create
      description: |-
        Accept proposal and trigger client conversion.

        This will trigger the signal to create a Client record.

        TIER 0: get_object() automatically verifies firm access.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Proposal'
          description: ''
  /api/crm/proposals/{id}/send/:
    post:
      operationId: crm_proposals_send_create
      description: |-
        Mark proposal as sent to prospect.

        TIER 0: get_object() automatically verifies firm access.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProposalRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Proposal'
          description: ''
  /api/crm/prospects/:
    get:
      operationId: crm_prospects_list
      description: |-
        ViewSet for Prospect management (Sales Pipeline).

        Prospects are qualified sales opportunities.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProspectList'
          description: ''
    post:
      operationId: crm_prospects_create
      description: |-
        ViewSet for Prospect management (Sales Pipeline).

        Prospects are qualified sales opportunities.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProspectRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProspectRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProspectRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Prospect'
          description: ''
  /api/crm/prospects/{id}/:
    get:
      operationId: crm_prospects_retrieve
      description: |-
        ViewSet for Prospect management (Sales Pipeline).

        Prospects are qualified sales opportunities.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Prospect'
          description: ''
    put:
      operationId: crm_prospects_update
      description: |-
        ViewSet for Prospect management (Sales Pipeline).

        Prospects are qualified sales opportunities.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProspectRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProspectRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProspectRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Prospect'
          description: ''
    patch:
      operationId: crm_prospects_partial_update
      description: |-
        ViewSet for Prospect management (Sales Pipeline).

        Prospects are qualified sales opportunities.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProspectRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProspectRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProspectRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Prospect'
          description: ''
    delete:
      operationId: crm_prospects_destroy
      description: |-
        ViewSet for Prospect management (Sales Pipeline).

        Prospects are qualified sales opportunities.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/crm/prospects/pipeline_report/:
    get:
      operationId: crm_prospects_pipeline_report_retrieve
      description: |-
        Get pipeline summary report.

        TIER 0: Report automatically scoped to request.firm.
      tags:
      - crm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Prospect'
          description: ''
  /api/documents/documents/:
    get:
      operationId: documents_documents_list
      description: |-
        ViewSet for Document model with S3 upload functionality.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedDocumentList'
          description: ''
    post:
      operationId: documents_documents_create
      description: |-
        ViewSet for Document model with S3 upload functionality.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - documents
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DocumentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DocumentRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
          description: ''
  /api/documents/documents/{id}/:
    get:
      operationId: documents_documents_retrieve
      description: |-
        ViewSet for Document model with S3 upload functionality.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
          description: ''
    put:
      operationId: documents_documents_update
      description: |-
        ViewSet for Document model with S3 upload functionality.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DocumentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DocumentRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
          description: ''
    patch:
      operationId: documents_documents_partial_update
      description: |-
        ViewSet for Document model with S3 upload functionality.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedDocumentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedDocumentRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
          description: ''
    delete:
      operationId: documents_documents_destroy
      description: |-
        ViewSet for Document model with S3 upload functionality.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/documents/documents/{id}/download/:
    get:
      operationId: documents_documents_download_retrieve
      description: |-
        Generate a presigned URL for document download.

        GET /api/documents/documents/{id}/download/

        TIER 0: get_object() automatically verifies firm access.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
          description: ''
  /api/documents/documents/upload/:
    post:
      operationId: documents_documents_upload_create
      description: |-
        Upload a new document to S3.

        POST /api/documents/documents/upload/

        TIER 0: Automatically includes firm context from request.
      tags:
      - documents
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DocumentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DocumentRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
          description: ''
  /api/documents/folders/:
    get:
      operationId: documents_folders_list
      description: |-
        ViewSet for Folder model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedFolderList'
          description: ''
    post:
      operationId: documents_folders_create
      description: |-
        ViewSet for Folder model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - documents
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FolderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FolderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FolderRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Folder'
          description: ''
  /api/documents/folders/{id}/:
    get:
      operationId: documents_folders_retrieve
      description: |-
        ViewSet for Folder model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Folder'
          description: ''
    put:
      operationId: documents_folders_update
      description: |-
        ViewSet for Folder model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FolderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FolderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FolderRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Folder'
          description: ''
    patch:
      operationId: documents_folders_partial_update
      description: |-
        ViewSet for Folder model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedFolderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedFolderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedFolderRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Folder'
          description: ''
    delete:
      operationId: documents_folders_destroy
      description: |-
        ViewSet for Folder model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/documents/versions/:
    get:
      operationId: documents_versions_list
      description: |-
        ViewSet for Version model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedVersionList'
          description: ''
    post:
      operationId: documents_versions_create
      description: |-
        ViewSet for Version model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - documents
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VersionRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/VersionRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/VersionRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
          description: ''
  /api/documents/versions/{id}/:
    get:
      operationId: documents_versions_retrieve
      description: |-
        ViewSet for Version model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
          description: ''
    put:
      operationId: documents_versions_update
      description: |-
        ViewSet for Version model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VersionRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/VersionRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/VersionRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
          description: ''
    patch:
      operationId: documents_versions_partial_update
      description: |-
        ViewSet for Version model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedVersionRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedVersionRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedVersionRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
          description: ''
    delete:
      operationId: documents_versions_destroy
      description: |-
        ViewSet for Version model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/documents/versions/{id}/download/:
    get:
      operationId: documents_versions_download_retrieve
      description: |-
        Generate a presigned URL for version download.

        GET /api/documents/versions/{id}/download/

        TIER 0: get_object() automatically verifies firm access.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - documents
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
          description: ''
  /api/finance/bills/:
    get:
      operationId: finance_bills_list
      description: |-
        ViewSet for Bill model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBillList'
          description: ''
    post:
      operationId: finance_bills_create
      description: |-
        ViewSet for Bill model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - finance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BillRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/BillRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/BillRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bill'
          description: ''
  /api/finance/bills/{id}/:
    get:
      operationId: finance_bills_retrieve
      description: |-
        ViewSet for Bill model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bill'
          description: ''
    put:
      operationId: finance_bills_update
      description: |-
        ViewSet for Bill model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BillRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/BillRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/BillRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bill'
          description: ''
    patch:
      operationId: finance_bills_partial_update
      description: |-
        ViewSet for Bill model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedBillRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedBillRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedBillRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bill'
          description: ''
    delete:
      operationId: finance_bills_destroy
      description: |-
        ViewSet for Bill model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/finance/invoices/:
    get:
      operationId: finance_invoices_list
      description: |-
        ViewSet for Invoice model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedInvoiceList'
          description: ''
    post:
      operationId: finance_invoices_create
      description: |-
        ViewSet for Invoice model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - finance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InvoiceRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/InvoiceRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/InvoiceRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Invoice'
          description: ''
  /api/finance/invoices/{id}/:
    get:
      operationId: finance_invoices_retrieve
      description: |-
        ViewSet for Invoice model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Invoice'
          description: ''
    put:
      operationId: finance_invoices_update
      description: |-
        ViewSet for Invoice model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InvoiceRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/InvoiceRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/InvoiceRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Invoice'
          description: ''
    patch:
      operationId: finance_invoices_partial_update
      description: |-
        ViewSet for Invoice model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedInvoiceRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedInvoiceRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedInvoiceRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Invoice'
          description: ''
    delete:
      operationId: finance_invoices_destroy
      description: |-
        ViewSet for Invoice model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/finance/ledger-entries/:
    get:
      operationId: finance_ledger_entries_list
      description: |-
        ViewSet for LedgerEntry model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedLedgerEntryList'
          description: ''
    post:
      operationId: finance_ledger_entries_create
      description: |-
        ViewSet for LedgerEntry model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      tags:
      - finance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LedgerEntryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LedgerEntryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LedgerEntryRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LedgerEntry'
          description: ''
  /api/finance/ledger-entries/{id}/:
    get:
      operationId: finance_ledger_entries_retrieve
      description: |-
        ViewSet for LedgerEntry model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LedgerEntry'
          description: ''
    put:
      operationId: finance_ledger_entries_update
      description: |-
        ViewSet for LedgerEntry model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LedgerEntryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LedgerEntryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LedgerEntryRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LedgerEntry'
          description: ''
    patch:
      operationId: finance_ledger_entries_partial_update
      description: |-
        ViewSet for LedgerEntry model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedLedgerEntryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedLedgerEntryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedLedgerEntryRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LedgerEntry'
          description: ''
    delete:
      operationId: finance_ledger_entries_destroy
      description: |-
        ViewSet for LedgerEntry model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/finance/payment/confirm_payment/:
    post:
      operationId: finance_payment_confirm_payment_create
      description: |-
        Confirm a payment and update invoice status.

        POST /api/finance/payment/confirm_payment/
        {
            "invoice_id": 123,
            "payment_intent_id": "pi_xxx",
            "amount_paid": 1000.00
        }
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          description: No response body
  /api/finance/payment/create_payment_intent/:
    post:
      operationId: finance_payment_create_payment_intent_create
      description: |-
        Create a Stripe payment intent for an invoice.

        POST /api/finance/payment/create_payment_intent/
        {
            "invoice_id": 123,
            "customer_email": "client@example.com"
        }
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          description: No response body
  /api/finance/payment/send_invoice/:
    post:
      operationId: finance_payment_send_invoice_create
      description: |-
        Create and send a Stripe invoice.

        POST /api/finance/payment/send_invoice/
        {
            "invoice_id": 123
        }
      tags:
      - finance
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          description: No response body
  /api/firm/break-glass/end-session/:
    post:
      operationId: firm_break_glass_end_session_create
      description: |-
        End the current break-glass session early.

        Requires:
            reason: str - Reason for ending the session

        Returns:
            {"success": true, "message": str}
      tags:
      - firm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          description: No response body
  /api/firm/break-glass/status/:
    get:
      operationId: firm_break_glass_status_retrieve
      description: |-
        Get current break-glass impersonation status.

        Returns:
            {
                "is_impersonating": bool,
                "session": {
                    "id": int,
                    "impersonated_user": str,
                    "operator": str,
                    "reason": str,
                    "activated_at": str,
                    "expires_at": str,
                    "time_remaining_seconds": int
                } | null
            }
      tags:
      - firm
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          description: No response body
  /api/portal/chat-threads/:
    get:
      operationId: portal_chat_threads_list
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientChatThreadList'
          description: ''
    post:
      operationId: portal_chat_threads_create
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
  /api/portal/chat-threads/{id}/:
    get:
      operationId: portal_chat_threads_retrieve
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
    put:
      operationId: portal_chat_threads_update
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
    patch:
      operationId: portal_chat_threads_partial_update
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientChatThreadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientChatThreadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientChatThreadRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
    delete:
      operationId: portal_chat_threads_destroy
      description: |-
        ViewSet for Client Chat Threads.

        Manages daily chat threads between clients and firm team.
        Threads auto-rotate daily for organization.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/portal/chat-threads/{id}/archive/:
    post:
      operationId: portal_chat_threads_archive_create
      description: |-
        Archive a chat thread.

        Only accessible to firm users.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientChatThreadRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
  /api/portal/chat-threads/active/:
    get:
      operationId: portal_chat_threads_active_retrieve
      description: |-
        Get or create today's active thread for the client.

        Returns the active thread with recent messages.
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientChatThread'
          description: ''
  /api/portal/comments/:
    get:
      operationId: portal_comments_list
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientCommentList'
          description: ''
    post:
      operationId: portal_comments_create
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
  /api/portal/comments/{id}/:
    get:
      operationId: portal_comments_retrieve
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
    put:
      operationId: portal_comments_update
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
    patch:
      operationId: portal_comments_partial_update
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientCommentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientCommentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientCommentRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
    delete:
      operationId: portal_comments_destroy
      description: |-
        ViewSet for Client Comments on Tasks.

        Allows client portal users to comment on tasks in their projects.
        Comments are visible to both firm team and client.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/portal/comments/{id}/mark_as_read/:
    post:
      operationId: portal_comments_mark_as_read_create
      description: |-
        Mark a client comment as read by firm team.

        Only accessible to firm users (not client portal users).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientCommentRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
  /api/portal/comments/unread/:
    get:
      operationId: portal_comments_unread_retrieve
      description: |-
        Get all unread client comments.

        Only accessible to firm users.
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientComment'
          description: ''
  /api/portal/contracts/:
    get:
      operationId: portal_contracts_list
      description: |-
        ViewSet for Client Portal - Contracts (read-only).

        Shows active and historical contracts for the client.
        Includes contract document download links.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientContractList'
          description: ''
  /api/portal/contracts/{id}/:
    get:
      operationId: portal_contracts_retrieve
      description: |-
        ViewSet for Client Portal - Contracts (read-only).

        Shows active and historical contracts for the client.
        Includes contract document download links.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientContract'
          description: ''
  /api/portal/contracts/{id}/download/:
    get:
      operationId: portal_contracts_download_retrieve
      description: |-
        Get download link for contract document.

        Returns the S3 URL for the signed contract PDF.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientContract'
          description: ''
  /api/portal/engagement-history/:
    get:
      operationId: portal_engagement_history_list
      description: |-
        ViewSet for Client Portal - Engagement History (read-only).

        Shows engagement version history with renewal tracking.
        Displays the full engagement timeline for the client.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientEngagementDetailList'
          description: ''
  /api/portal/engagement-history/{id}/:
    get:
      operationId: portal_engagement_history_retrieve
      description: |-
        ViewSet for Client Portal - Engagement History (read-only).

        Shows engagement version history with renewal tracking.
        Displays the full engagement timeline for the client.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientEngagementDetail'
          description: ''
  /api/portal/engagement-history/timeline/:
    get:
      operationId: portal_engagement_history_timeline_retrieve
      description: |-
        Get engagement timeline visualization data.

        Returns all engagements ordered by version for timeline display.
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientEngagementDetail'
          description: ''
  /api/portal/invoices/:
    get:
      operationId: portal_invoices_list
      description: |-
        ViewSet for Client Portal - Invoices (read-only).

        Shows invoices for the authenticated client portal user.
        Clients can view their invoices but cannot modify them.
        Includes payment link generation for Stripe.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientInvoiceList'
          description: ''
  /api/portal/invoices/{id}/:
    get:
      operationId: portal_invoices_retrieve
      description: |-
        ViewSet for Client Portal - Invoices (read-only).

        Shows invoices for the authenticated client portal user.
        Clients can view their invoices but cannot modify them.
        Includes payment link generation for Stripe.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientInvoice'
          description: ''
  /api/portal/invoices/{id}/generate_payment_link/:
    post:
      operationId: portal_invoices_generate_payment_link_create
      description: |-
        Generate Stripe payment link for an invoice.

        Returns a Stripe Checkout session URL that the client can use to pay.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientInvoice'
          description: ''
  /api/portal/invoices/summary/:
    get:
      operationId: portal_invoices_summary_retrieve
      description: |-
        Get invoice summary for the client.

        Returns counts and totals by status.
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientInvoice'
          description: ''
  /api/portal/messages/:
    get:
      operationId: portal_messages_list
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientMessageList'
          description: ''
    post:
      operationId: portal_messages_create
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
  /api/portal/messages/{id}/:
    get:
      operationId: portal_messages_retrieve
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
    put:
      operationId: portal_messages_update
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
    patch:
      operationId: portal_messages_partial_update
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientMessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientMessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientMessageRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
    delete:
      operationId: portal_messages_destroy
      description: |-
        ViewSet for Client Messages.

        Handles real-time messaging between clients and firm team.
        Messages are organized by daily threads.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/portal/messages/{id}/mark_as_read/:
    post:
      operationId: portal_messages_mark_as_read_create
      description: |-
        Mark a message as read.

        Accessible to both clients and firm users.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientMessageRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
  /api/portal/messages/unread/:
    get:
      operationId: portal_messages_unread_retrieve
      description: |-
        Get unread messages for the current user.

        For clients: get unread messages from firm
        For firm: get unread messages from all clients
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientMessage'
          description: ''
  /api/portal/projects/:
    get:
      operationId: portal_projects_list
      description: |-
        ViewSet for Client Portal - Projects (read-only).

        Shows projects for the authenticated client portal user.
        Clients can view their projects and tasks, but cannot modify them.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientProjectList'
          description: ''
  /api/portal/projects/{id}/:
    get:
      operationId: portal_projects_retrieve
      description: |-
        ViewSet for Client Portal - Projects (read-only).

        Shows projects for the authenticated client portal user.
        Clients can view their projects and tasks, but cannot modify them.

        TIER 0: Firm-scoped for firm users, client-scoped for portal users.
        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientProject'
          description: ''
  /api/portal/projects/{id}/tasks/:
    get:
      operationId: portal_projects_tasks_retrieve
      description: |-
        Get all tasks for a specific project.

        Returns tasks with client comments.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientProject'
          description: ''
  /api/portal/proposals/:
    get:
      operationId: portal_proposals_list
      description: |-
        ViewSet for Client Portal - Proposals (read-only).

        Shows proposals sent to the client.
        Clients can view proposal details but cannot modify them.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientProposalList'
          description: ''
  /api/portal/proposals/{id}/:
    get:
      operationId: portal_proposals_retrieve
      description: |-
        ViewSet for Client Portal - Proposals (read-only).

        Shows proposals sent to the client.
        Clients can view proposal details but cannot modify them.

        TIER 2: Portal-accessible endpoint (portal users + firm users allowed).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientProposal'
          description: ''
  /api/portal/proposals/{id}/accept/:
    post:
      operationId: portal_proposals_accept_create
      description: |-
        Accept a proposal (client-side acceptance).

        This is a placeholder for e-signature integration.
        In production, this would trigger DocuSign/HelloSign workflow.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - portal
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientProposal'
          description: ''
  /api/projects/projects/:
    get:
      operationId: projects_projects_list
      description: |-
        ViewSet for Project model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - projects
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProjectList'
          description: ''
    post:
      operationId: projects_projects_create
      description: |-
        ViewSet for Project model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProjectRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProjectRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: ''
  /api/projects/projects/{id}/:
    get:
      operationId: projects_projects_retrieve
      description: |-
        ViewSet for Project model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: ''
    put:
      operationId: projects_projects_update
      description: |-
        ViewSet for Project model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProjectRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProjectRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: ''
    patch:
      operationId: projects_projects_partial_update
      description: |-
        ViewSet for Project model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProjectRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProjectRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProjectRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: ''
    delete:
      operationId: projects_projects_destroy
      description: |-
        ViewSet for Project model.

        TIER 0: Automatically scoped to request.firm via FirmScopedMixin.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/projects/tasks/:
    get:
      operationId: projects_tasks_list
      description: |-
        ViewSet for Task model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: Task doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - projects
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedTaskList'
          description: ''
    post:
      operationId: projects_tasks_create
      description: |-
        ViewSet for Task model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: Task doesn't have direct firm FK, so we filter via project__firm.
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TaskRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TaskRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TaskRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
          description: ''
  /api/projects/tasks/{id}/:
    get:
      operationId: projects_tasks_retrieve
      description: |-
        ViewSet for Task model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: Task doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
          description: ''
    put:
      operationId: projects_tasks_update
      description: |-
        ViewSet for Task model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: Task doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TaskRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TaskRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TaskRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
          description: ''
    patch:
      operationId: projects_tasks_partial_update
      description: |-
        ViewSet for Task model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: Task doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedTaskRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedTaskRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedTaskRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
          description: ''
    delete:
      operationId: projects_tasks_destroy
      description: |-
        ViewSet for Task model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: Task doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/projects/time-entries/:
    get:
      operationId: projects_time_entries_list
      description: |-
        ViewSet for TimeEntry model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: TimeEntry doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - projects
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedTimeEntryList'
          description: ''
    post:
      operationId: projects_time_entries_create
      description: |-
        ViewSet for TimeEntry model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: TimeEntry doesn't have direct firm FK, so we filter via project__firm.
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TimeEntryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TimeEntryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TimeEntryRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeEntry'
          description: ''
  /api/projects/time-entries/{id}/:
    get:
      operationId: projects_time_entries_retrieve
      description: |-
        ViewSet for TimeEntry model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: TimeEntry doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeEntry'
          description: ''
    put:
      operationId: projects_time_entries_update
      description: |-
        ViewSet for TimeEntry model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: TimeEntry doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TimeEntryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TimeEntryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TimeEntryRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeEntry'
          description: ''
    patch:
      operationId: projects_time_entries_partial_update
      description: |-
        ViewSet for TimeEntry model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: TimeEntry doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedTimeEntryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedTimeEntryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedTimeEntryRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeEntry'
          description: ''
    delete:
      operationId: projects_time_entries_destroy
      description: |-
        ViewSet for TimeEntry model.

        TIER 0: Scoped to request.firm via project relationship.
        TIER 2: Requires authentication.
        TIER 2.5: Portal users explicitly denied (firm admin only).
        Note: TimeEntry doesn't have direct firm FK, so we filter via project__firm.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - projects
      security:
      - jwtAuth: []
      - cookieAuth: []
      responses:
        '204':
          description: No response body
components:
  schemas:
    AccountEnum:
      enum:
      - cash
      - accounts_receivable
      - equipment
      - accounts_payable
      - loans_payable
      - owners_equity
      - retained_earnings
      - consulting_revenue
      - other_income
      - salaries_expense
      - software_expense
      - travel_expense
      - office_expense
      - other_expense
      type: string
      description: |-
        * `cash` - Cash
        * `accounts_receivable` - Accounts Receivable
        * `equipment` - Equipment
        * `accounts_payable` - Accounts Payable
        * `loans_payable` - Loans Payable
        * `owners_equity` - Owner's Equity
        * `retained_earnings` - Retained Earnings
        * `consulting_revenue` - Consulting Revenue
        * `other_income` - Other Income
        * `salaries_expense` - Salaries Expense
        * `software_expense` - Software Expense
        * `travel_expense` - Travel Expense
        * `office_expense` - Office Supplies
        * `other_expense` - Other Expense
    Asset:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        assigned_to_name:
          type: string
          readOnly: true
        asset_tag:
          type: string
          description: Unique identifier per firm (e.g., barcode, serial number)
          maxLength: 50
        name:
          type: string
          maxLength: 255
        description:
          type: string
        category:
          $ref: '#/components/schemas/CategoryEnum'
        status:
          $ref: '#/components/schemas/AssetStatusEnum'
        purchase_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Original purchase price
        purchase_date:
          type: string
          format: date
        vendor:
          type: string
          description: Where was this purchased?
          maxLength: 255
        useful_life_years:
          type: integer
          description: Expected useful life for depreciation calculation
        salvage_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Expected value at end of useful life
        manufacturer:
          type: string
          maxLength: 255
        model_number:
          type: string
          maxLength: 100
        serial_number:
          type: string
          maxLength: 100
        location:
          type: string
          description: Physical location (e.g., office, warehouse)
          maxLength: 255
        warranty_expiration:
          type: string
          format: date
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        notes:
          type: string
        firm:
          type: integer
          description: Firm (workspace) this asset belongs to
        assigned_to:
          type: integer
          nullable: true
          description: The user currently using this asset
      required:
      - asset_tag
      - assigned_to_name
      - category
      - created_at
      - firm
      - id
      - name
      - purchase_date
      - purchase_price
      - updated_at
    AssetRequest:
      type: object
      properties:
        asset_tag:
          type: string
          minLength: 1
          description: Unique identifier per firm (e.g., barcode, serial number)
          maxLength: 50
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        category:
          $ref: '#/components/schemas/CategoryEnum'
        status:
          $ref: '#/components/schemas/AssetStatusEnum'
        purchase_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Original purchase price
        purchase_date:
          type: string
          format: date
        vendor:
          type: string
          description: Where was this purchased?
          maxLength: 255
        useful_life_years:
          type: integer
          description: Expected useful life for depreciation calculation
        salvage_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Expected value at end of useful life
        manufacturer:
          type: string
          maxLength: 255
        model_number:
          type: string
          maxLength: 100
        serial_number:
          type: string
          maxLength: 100
        location:
          type: string
          description: Physical location (e.g., office, warehouse)
          maxLength: 255
        warranty_expiration:
          type: string
          format: date
          nullable: true
        notes:
          type: string
        firm:
          type: integer
          description: Firm (workspace) this asset belongs to
        assigned_to:
          type: integer
          nullable: true
          description: The user currently using this asset
      required:
      - asset_tag
      - category
      - firm
      - name
      - purchase_date
      - purchase_price
    AssetStatusEnum:
      enum:
      - active
      - in_repair
      - retired
      - lost
      - disposed
      type: string
      description: |-
        * `active` - Active
        * `in_repair` - In Repair
        * `retired` - Retired
        * `lost` - Lost/Stolen
        * `disposed` - Disposed
    Bill:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        project_name:
          type: string
          readOnly: true
        balance_due:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
        vendor_name:
          type: string
          maxLength: 255
        vendor_email:
          type: string
          format: email
          maxLength: 254
        bill_number:
          type: string
          description: Vendor's bill/invoice number
          maxLength: 50
        reference_number:
          type: string
          description: Our internal reference number (unique per firm)
          maxLength: 50
        status:
          $ref: '#/components/schemas/BillStatusEnum'
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        tax_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        amount_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Total amount paid to vendor
        currency:
          type: string
          maxLength: 3
        bill_date:
          type: string
          format: date
          description: Date on vendor's bill
        due_date:
          type: string
          format: date
        paid_date:
          type: string
          format: date
          nullable: true
          description: Date when bill was fully paid
        expense_category:
          type: string
          description: e.g., Software, Travel, Office Supplies
          maxLength: 100
        description:
          type: string
        line_items:
          description: 'List of line items: [{description, quantity, rate, amount},
            ...]'
        approved_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        firm:
          type: integer
          description: Firm (workspace) this bill belongs to
        project:
          type: integer
          nullable: true
          description: 'Optional: link to project if this is a project expense'
        approved_by:
          type: integer
          nullable: true
      required:
      - approved_at
      - balance_due
      - bill_date
      - bill_number
      - created_at
      - due_date
      - expense_category
      - firm
      - id
      - project_name
      - reference_number
      - subtotal
      - total_amount
      - updated_at
      - vendor_name
    BillRequest:
      type: object
      properties:
        vendor_name:
          type: string
          minLength: 1
          maxLength: 255
        vendor_email:
          type: string
          format: email
          maxLength: 254
        bill_number:
          type: string
          minLength: 1
          description: Vendor's bill/invoice number
          maxLength: 50
        reference_number:
          type: string
          minLength: 1
          description: Our internal reference number (unique per firm)
          maxLength: 50
        status:
          $ref: '#/components/schemas/BillStatusEnum'
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        tax_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        amount_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Total amount paid to vendor
        currency:
          type: string
          minLength: 1
          maxLength: 3
        bill_date:
          type: string
          format: date
          description: Date on vendor's bill
        due_date:
          type: string
          format: date
        paid_date:
          type: string
          format: date
          nullable: true
          description: Date when bill was fully paid
        expense_category:
          type: string
          minLength: 1
          description: e.g., Software, Travel, Office Supplies
          maxLength: 100
        description:
          type: string
        line_items:
          description: 'List of line items: [{description, quantity, rate, amount},
            ...]'
        firm:
          type: integer
          description: Firm (workspace) this bill belongs to
        project:
          type: integer
          nullable: true
          description: 'Optional: link to project if this is a project expense'
        approved_by:
          type: integer
          nullable: true
      required:
      - bill_date
      - bill_number
      - due_date
      - expense_category
      - firm
      - reference_number
      - subtotal
      - total_amount
      - vendor_name
    BillStatusEnum:
      enum:
      - received
      - approved
      - paid
      - partial
      - overdue
      - disputed
      type: string
      description: |-
        * `received` - Received
        * `approved` - Approved
        * `paid` - Paid
        * `partial` - Partially Paid
        * `overdue` - Overdue
        * `disputed` - Disputed
    BillingTypeEnum:
      enum:
      - fixed_price
      - time_and_materials
      - retainer
      - non_billable
      type: string
      description: |-
        * `fixed_price` - Fixed Price
        * `time_and_materials` - Time & Materials
        * `retainer` - Retainer
        * `non_billable` - Non-Billable
    Campaign:
      type: object
      description: Serializer for Campaign model.
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        type:
          $ref: '#/components/schemas/TypeEnum'
        status:
          $ref: '#/components/schemas/CampaignStatusEnum'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        budget:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        actual_cost:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        targeted_clients:
          type: array
          items:
            type: integer
          description: Existing clients targeted by this campaign (renewals, upsells,
            etc.)
        target_leads:
          type: integer
          description: Target number of new leads
        leads_generated:
          type: integer
          readOnly: true
          description: Auto-calculated from Lead.campaign foreign key
        opportunities_created:
          type: integer
          description: Number of Prospects created from campaign leads
        clients_contacted:
          type: integer
          readOnly: true
          description: Number of existing clients contacted
        renewal_proposals_sent:
          type: integer
          readOnly: true
          description: Number of renewal/upsell proposals generated
        renewals_won:
          type: integer
          readOnly: true
          description: Number of successful renewals/upsells
        revenue_generated:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Revenue from won deals (new + renewal) attributed to this campaign
        owner:
          type: integer
          nullable: true
        owner_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - budget
      - clients_contacted
      - created_at
      - end_date
      - id
      - leads_generated
      - name
      - owner_name
      - renewal_proposals_sent
      - renewals_won
      - start_date
      - type
      - updated_at
    CampaignRequest:
      type: object
      description: Serializer for Campaign model.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        type:
          $ref: '#/components/schemas/TypeEnum'
        status:
          $ref: '#/components/schemas/CampaignStatusEnum'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        budget:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        actual_cost:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        targeted_clients:
          type: array
          items:
            type: integer
          description: Existing clients targeted by this campaign (renewals, upsells,
            etc.)
        target_leads:
          type: integer
          description: Target number of new leads
        opportunities_created:
          type: integer
          description: Number of Prospects created from campaign leads
        revenue_generated:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Revenue from won deals (new + renewal) attributed to this campaign
        owner:
          type: integer
          nullable: true
      required:
      - budget
      - end_date
      - name
      - start_date
      - type
    CampaignStatusEnum:
      enum:
      - planning
      - active
      - completed
      - paused
      - cancelled
      type: string
      description: |-
        * `planning` - Planning
        * `active` - Active
        * `completed` - Completed
        * `paused` - Paused
        * `cancelled` - Cancelled
    CategoryEnum:
      enum:
      - computer
      - software
      - furniture
      - vehicle
      - other
      type: string
      description: |-
        * `computer` - Computer Equipment
        * `software` - Software License
        * `furniture` - Furniture
        * `vehicle` - Vehicle
        * `other` - Other
    ChangePasswordRequest:
      type: object
      description: Serializer for password change.
      properties:
        old_password:
          type: string
          writeOnly: true
          minLength: 1
        new_password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - new_password
      - old_password
    Client:
      type: object
      description: Serializer for Client model.
      properties:
        id:
          type: integer
          readOnly: true
        organization:
          type: integer
          nullable: true
          description: Optional organization for cross-client collaboration
        source_prospect:
          type: integer
          readOnly: true
          nullable: true
          description: The prospect that was converted to this client
        source_proposal:
          type: integer
          readOnly: true
          nullable: true
          description: The proposal that created this client
        company_name:
          type: string
          maxLength: 255
        industry:
          type: string
          maxLength: 100
        primary_contact_name:
          type: string
          maxLength: 255
        primary_contact_email:
          type: string
          format: email
          maxLength: 254
        primary_contact_phone:
          type: string
          maxLength: 50
        street_address:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        country:
          type: string
          maxLength: 100
        website:
          type: string
          format: uri
          maxLength: 200
        employee_count:
          type: integer
          nullable: true
        status:
          $ref: '#/components/schemas/ClientStatusEnum'
        account_manager:
          type: integer
          nullable: true
          description: Primary account manager for this client
        account_manager_name:
          type: string
          readOnly: true
        assigned_team:
          type: array
          items:
            type: integer
          description: Team members assigned to this client
        assigned_team_names:
          type: string
          readOnly: true
        portal_enabled:
          type: boolean
          description: Whether client portal access is enabled
        total_lifetime_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
          description: Total revenue from this client across all engagements
        active_projects_count:
          type: integer
          readOnly: true
          description: Number of currently active projects
        client_since:
          type: string
          format: date
          description: Date of first engagement
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        notes:
          type: string
          description: Internal notes (not visible to client)
      required:
      - account_manager_name
      - active_projects_count
      - assigned_team_names
      - client_since
      - company_name
      - created_at
      - id
      - primary_contact_email
      - primary_contact_name
      - source_proposal
      - source_prospect
      - total_lifetime_value
      - updated_at
    ClientChatThread:
      type: object
      description: Serializer for ClientChatThread model.
      properties:
        id:
          type: integer
          readOnly: true
        client:
          type: integer
          description: Client this thread belongs to
        client_name:
          type: string
          readOnly: true
        date:
          type: string
          format: date
          description: Date of this thread (YYYY-MM-DD)
        is_active:
          type: boolean
          description: Whether this is the current active thread
        archived_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          description: When this thread was archived
        message_count:
          type: integer
          readOnly: true
          description: Total messages in this thread
        last_message_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          description: Timestamp of last message
        last_message_by:
          type: integer
          readOnly: true
          nullable: true
          description: User who sent last message
        last_message_by_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        messages:
          type: array
          items:
            $ref: '#/components/schemas/ClientMessage'
          readOnly: true
        recent_messages:
          type: string
          readOnly: true
      required:
      - archived_at
      - client
      - client_name
      - created_at
      - date
      - id
      - last_message_at
      - last_message_by
      - last_message_by_name
      - message_count
      - messages
      - recent_messages
      - updated_at
    ClientChatThreadRequest:
      type: object
      description: Serializer for ClientChatThread model.
      properties:
        client:
          type: integer
          description: Client this thread belongs to
        date:
          type: string
          format: date
          description: Date of this thread (YYYY-MM-DD)
        is_active:
          type: boolean
          description: Whether this is the current active thread
      required:
      - client
      - date
    ClientComment:
      type: object
      description: Serializer for ClientComment model.
      properties:
        id:
          type: integer
          readOnly: true
        client:
          type: integer
          description: Client who owns this comment
        client_name:
          type: string
          readOnly: true
        task:
          type: integer
          description: Task being commented on
        task_title:
          type: string
          readOnly: true
        task_project:
          type: string
          readOnly: true
        author:
          type: integer
          readOnly: true
          description: Portal user who wrote this comment
        author_name:
          type: string
          readOnly: true
        author_email:
          type: string
          format: email
          readOnly: true
        comment:
          type: string
        has_attachment:
          type: boolean
          description: Whether this comment has file attachments
        is_read_by_firm:
          type: boolean
          readOnly: true
          description: Whether firm team has read this client comment
        read_by:
          type: integer
          readOnly: true
          nullable: true
          description: Firm team member who read this comment
        read_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          description: When the comment was read by firm
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - author
      - author_email
      - author_name
      - client
      - client_name
      - comment
      - created_at
      - id
      - is_read_by_firm
      - read_at
      - read_by
      - task
      - task_project
      - task_title
      - updated_at
    ClientCommentRequest:
      type: object
      description: Serializer for ClientComment model.
      properties:
        client:
          type: integer
          description: Client who owns this comment
        task:
          type: integer
          description: Task being commented on
        comment:
          type: string
          minLength: 1
        has_attachment:
          type: boolean
          description: Whether this comment has file attachments
      required:
      - client
      - comment
      - task
    ClientContract:
      type: object
      description: |-
        Client-facing Contract serializer (read-only).

        Shows contract details suitable for client portal.
        Hides internal firm notes and sensitive information.
      properties:
        id:
          type: integer
          readOnly: true
        contract_number:
          type: string
          readOnly: true
        title:
          type: string
          readOnly: true
        description:
          type: string
          readOnly: true
          description: Statement of work, deliverables, terms
        status:
          allOf:
          - $ref: '#/components/schemas/StatusB45Enum'
          readOnly: true
        status_display:
          type: string
          readOnly: true
        total_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
        currency:
          type: string
          readOnly: true
        payment_terms:
          allOf:
          - $ref: '#/components/schemas/PaymentTermsEnum'
          readOnly: true
        payment_terms_display:
          type: string
          readOnly: true
        start_date:
          type: string
          format: date
          readOnly: true
        end_date:
          type: string
          format: date
          readOnly: true
        signed_date:
          type: string
          format: date
          readOnly: true
          nullable: true
        contract_file_url:
          type: string
          format: uri
          readOnly: true
          description: Link to signed contract PDF in S3
        proposal_number:
          type: string
          readOnly: true
        is_active:
          type: string
          readOnly: true
        days_remaining:
          type: string
          readOnly: true
        client_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - client_name
      - contract_file_url
      - contract_number
      - created_at
      - currency
      - days_remaining
      - description
      - end_date
      - id
      - is_active
      - payment_terms
      - payment_terms_display
      - proposal_number
      - signed_date
      - start_date
      - status
      - status_display
      - title
      - total_value
      - updated_at
    ClientEngagement:
      type: object
      description: Serializer for ClientEngagement model.
      properties:
        id:
          type: integer
          readOnly: true
        client:
          type: integer
        client_name:
          type: string
          readOnly: true
        contract:
          type: integer
        contract_number:
          type: string
          readOnly: true
        status:
          $ref: '#/components/schemas/Status619Enum'
        version:
          type: integer
          default: 1
          description: Version number for this engagement (1, 2, 3...)
        parent_engagement:
          type: integer
          nullable: true
          description: Previous engagement if this is a renewal
        parent_engagement_version:
          type: integer
          readOnly: true
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        actual_end_date:
          type: string
          format: date
          nullable: true
          description: Actual completion date if different from planned
        contracted_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        actual_revenue:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Actual revenue generated (may differ from contracted)
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        notes:
          type: string
      required:
      - client
      - client_name
      - contract
      - contract_number
      - contracted_value
      - created_at
      - end_date
      - id
      - parent_engagement_version
      - start_date
      - updated_at
    ClientEngagementDetail:
      type: object
      description: |-
        Client-facing ClientEngagement serializer with nested contract.

        Shows engagement history with version tracking.
      properties:
        id:
          type: integer
          readOnly: true
        client_name:
          type: string
          readOnly: true
        contract:
          allOf:
          - $ref: '#/components/schemas/ClientContract'
          readOnly: true
        status:
          allOf:
          - $ref: '#/components/schemas/Status619Enum'
          readOnly: true
        status_display:
          type: string
          readOnly: true
        version:
          type: integer
          readOnly: true
          description: Version number for this engagement (1, 2, 3...)
        start_date:
          type: string
          format: date
          readOnly: true
        end_date:
          type: string
          format: date
          readOnly: true
        actual_end_date:
          type: string
          format: date
          readOnly: true
          nullable: true
          description: Actual completion date if different from planned
        has_parent:
          type: string
          readOnly: true
        has_renewals:
          type: string
          readOnly: true
      required:
      - actual_end_date
      - client_name
      - contract
      - end_date
      - has_parent
      - has_renewals
      - id
      - start_date
      - status
      - status_display
      - version
    ClientEngagementRequest:
      type: object
      description: Serializer for ClientEngagement model.
      properties:
        client:
          type: integer
        contract:
          type: integer
        status:
          $ref: '#/components/schemas/Status619Enum'
        version:
          type: integer
          default: 1
          description: Version number for this engagement (1, 2, 3...)
        parent_engagement:
          type: integer
          nullable: true
          description: Previous engagement if this is a renewal
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        actual_end_date:
          type: string
          format: date
          nullable: true
          description: Actual completion date if different from planned
        contracted_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        actual_revenue:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Actual revenue generated (may differ from contracted)
        notes:
          type: string
      required:
      - client
      - contract
      - contracted_value
      - end_date
      - start_date
    ClientInvoice:
      type: object
      description: |-
        Client-facing Invoice serializer (read-only).

        Shows invoice details suitable for client portal.
        Hides sensitive firm information like internal notes and markup details.
      properties:
        id:
          type: integer
          readOnly: true
        invoice_number:
          type: string
          readOnly: true
        client_name:
          type: string
          readOnly: true
        project:
          type: integer
          readOnly: true
          nullable: true
          description: 'Optional: link to specific project'
        project_name:
          type: string
          readOnly: true
        project_code:
          type: string
          readOnly: true
        status:
          allOf:
          - $ref: '#/components/schemas/StatusC6dEnum'
          readOnly: true
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
        tax_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
        amount_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
          description: Total amount received from client
        balance_due:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
        issue_date:
          type: string
          format: date
          readOnly: true
        due_date:
          type: string
          format: date
          readOnly: true
        paid_date:
          type: string
          format: date
          readOnly: true
          nullable: true
          description: Date when invoice was fully paid
        line_items:
          readOnly: true
          description: 'List of line items: [{description, quantity, rate, amount},
            ...]'
        is_overdue:
          type: boolean
          readOnly: true
        days_until_due:
          type: string
          readOnly: true
        can_pay_online:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - amount_paid
      - balance_due
      - can_pay_online
      - client_name
      - created_at
      - days_until_due
      - due_date
      - id
      - invoice_number
      - is_overdue
      - issue_date
      - line_items
      - paid_date
      - project
      - project_code
      - project_name
      - status
      - subtotal
      - tax_amount
      - total_amount
    ClientMessage:
      type: object
      description: Serializer for ClientMessage model.
      properties:
        id:
          type: integer
          readOnly: true
        thread:
          type: integer
          description: Thread this message belongs to
        sender:
          type: integer
          readOnly: true
          description: User who sent this message
        sender_name:
          type: string
          readOnly: true
        sender_email:
          type: string
          format: email
          readOnly: true
        is_from_client:
          type: boolean
          readOnly: true
          description: Whether sender is a client portal user
        message_type:
          $ref: '#/components/schemas/MessageTypeEnum'
        content:
          type: string
          description: Message text content
        attachment_url:
          type: string
          format: uri
          description: S3 URL for file attachment (if message_type=file)
          maxLength: 200
        attachment_filename:
          type: string
          description: Original filename of attachment
          maxLength: 255
        attachment_size_bytes:
          type: integer
          nullable: true
          description: File size in bytes
        is_read:
          type: boolean
          readOnly: true
          description: Whether message has been read by recipient
        read_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          description: When message was read
        read_by:
          type: integer
          readOnly: true
          nullable: true
          description: User who read this message
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - content
      - created_at
      - id
      - is_from_client
      - is_read
      - read_at
      - read_by
      - sender
      - sender_email
      - sender_name
      - thread
      - updated_at
    ClientMessageRequest:
      type: object
      description: Serializer for ClientMessage model.
      properties:
        thread:
          type: integer
          description: Thread this message belongs to
        message_type:
          $ref: '#/components/schemas/MessageTypeEnum'
        content:
          type: string
          minLength: 1
          description: Message text content
        attachment_url:
          type: string
          format: uri
          description: S3 URL for file attachment (if message_type=file)
          maxLength: 200
        attachment_filename:
          type: string
          description: Original filename of attachment
          maxLength: 255
        attachment_size_bytes:
          type: integer
          nullable: true
          description: File size in bytes
      required:
      - content
      - thread
    ClientNote:
      type: object
      description: Serializer for ClientNote model.
      properties:
        id:
          type: integer
          readOnly: true
        client:
          type: integer
        client_name:
          type: string
          readOnly: true
        author:
          type: integer
          readOnly: true
          nullable: true
        author_name:
          type: string
          readOnly: true
        note:
          type: string
        is_pinned:
          type: boolean
          description: Pinned notes appear at top
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - author
      - author_name
      - client
      - client_name
      - created_at
      - id
      - note
      - updated_at
    ClientNoteRequest:
      type: object
      description: Serializer for ClientNote model.
      properties:
        client:
          type: integer
        note:
          type: string
          minLength: 1
        is_pinned:
          type: boolean
          description: Pinned notes appear at top
      required:
      - client
      - note
    ClientPortalUser:
      type: object
      description: Serializer for ClientPortalUser model.
      properties:
        id:
          type: integer
          readOnly: true
        client:
          type: integer
        client_name:
          type: string
          readOnly: true
        user:
          type: integer
        user_email:
          type: string
          format: email
          readOnly: true
        user_name:
          type: string
          readOnly: true
        role:
          $ref: '#/components/schemas/RoleEnum'
        can_upload_documents:
          type: boolean
        can_view_billing:
          type: boolean
        can_message_team:
          type: boolean
        can_view_projects:
          type: boolean
        invited_by:
          type: integer
          readOnly: true
          nullable: true
          description: Firm user who invited this client user
        invited_at:
          type: string
          format: date-time
          readOnly: true
        last_login:
          type: string
          format: date-time
          nullable: true
      required:
      - client
      - client_name
      - id
      - invited_at
      - invited_by
      - user
      - user_email
      - user_name
    ClientPortalUserRequest:
      type: object
      description: Serializer for ClientPortalUser model.
      properties:
        client:
          type: integer
        user:
          type: integer
        role:
          $ref: '#/components/schemas/RoleEnum'
        can_upload_documents:
          type: boolean
        can_view_billing:
          type: boolean
        can_message_team:
          type: boolean
        can_view_projects:
          type: boolean
        last_login:
          type: string
          format: date-time
          nullable: true
      required:
      - client
      - user
    ClientProject:
      type: object
      description: |-
        Client-facing Project serializer (read-only).

        Shows project details with tasks, suitable for client portal.
        Hides sensitive firm information like hourly rates and internal notes.
      properties:
        id:
          type: integer
          readOnly: true
        project_code:
          type: string
          readOnly: true
        name:
          type: string
          readOnly: true
        description:
          type: string
          readOnly: true
        status:
          allOf:
          - $ref: '#/components/schemas/Status452Enum'
          readOnly: true
        budget:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
          nullable: true
          description: Total project budget
        start_date:
          type: string
          format: date
          readOnly: true
        end_date:
          type: string
          format: date
          readOnly: true
        actual_completion_date:
          type: string
          format: date
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        project_manager_name:
          type: string
          readOnly: true
        tasks:
          type: array
          items:
            $ref: '#/components/schemas/ClientTask'
          readOnly: true
        total_hours_logged:
          type: string
          readOnly: true
        progress_percentage:
          type: string
          readOnly: true
        tasks_summary:
          type: string
          readOnly: true
      required:
      - actual_completion_date
      - budget
      - created_at
      - description
      - end_date
      - id
      - name
      - progress_percentage
      - project_code
      - project_manager_name
      - start_date
      - status
      - tasks
      - tasks_summary
      - total_hours_logged
      - updated_at
    ClientProposal:
      type: object
      description: |-
        Client-facing Proposal serializer (read-only).

        Shows proposal details suitable for client portal.
        Hides internal firm information and decision-making details.
      properties:
        id:
          type: integer
          readOnly: true
        proposal_number:
          type: string
          readOnly: true
        proposal_type:
          allOf:
          - $ref: '#/components/schemas/ProposalTypeEnum'
          readOnly: true
          description: |-
            Type of proposal: new business, expansion, or renewal

            * `prospective_client` - Prospective Client - New Business
            * `update_client` - Update Client - Expansion/Upsell
            * `renewal_client` - Renewal Client - Contract Renewal
        type_display:
          type: string
          readOnly: true
        title:
          type: string
          readOnly: true
        description:
          type: string
          readOnly: true
          description: Scope of work, deliverables, timeline
        status:
          allOf:
          - $ref: '#/components/schemas/Status97cEnum'
          readOnly: true
        status_display:
          type: string
          readOnly: true
        total_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
        currency:
          type: string
          readOnly: true
        valid_until:
          type: string
          format: date
          readOnly: true
          description: Proposal expiration date
        estimated_start_date:
          type: string
          format: date
          readOnly: true
          nullable: true
        estimated_end_date:
          type: string
          format: date
          readOnly: true
          nullable: true
        sent_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        accepted_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        is_expired:
          type: string
          readOnly: true
        days_until_expiry:
          type: string
          readOnly: true
        client_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - accepted_at
      - client_name
      - created_at
      - currency
      - days_until_expiry
      - description
      - estimated_end_date
      - estimated_start_date
      - id
      - is_expired
      - proposal_number
      - proposal_type
      - sent_at
      - status
      - status_display
      - title
      - total_value
      - type_display
      - valid_until
    ClientRequest:
      type: object
      description: Serializer for Client model.
      properties:
        organization:
          type: integer
          nullable: true
          description: Optional organization for cross-client collaboration
        company_name:
          type: string
          minLength: 1
          maxLength: 255
        industry:
          type: string
          maxLength: 100
        primary_contact_name:
          type: string
          minLength: 1
          maxLength: 255
        primary_contact_email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        primary_contact_phone:
          type: string
          maxLength: 50
        street_address:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        country:
          type: string
          minLength: 1
          maxLength: 100
        website:
          type: string
          format: uri
          maxLength: 200
        employee_count:
          type: integer
          nullable: true
        status:
          $ref: '#/components/schemas/ClientStatusEnum'
        account_manager:
          type: integer
          nullable: true
          description: Primary account manager for this client
        assigned_team:
          type: array
          items:
            type: integer
          description: Team members assigned to this client
        portal_enabled:
          type: boolean
          description: Whether client portal access is enabled
        client_since:
          type: string
          format: date
          description: Date of first engagement
        notes:
          type: string
          description: Internal notes (not visible to client)
      required:
      - client_since
      - company_name
      - primary_contact_email
      - primary_contact_name
    ClientStatusEnum:
      enum:
      - active
      - inactive
      - terminated
      type: string
      description: |-
        * `active` - Active
        * `inactive` - Inactive - No Active Projects
        * `terminated` - Terminated
    ClientTask:
      type: object
      description: |-
        Client-facing Task serializer (read-only).

        Shows task details without exposing sensitive firm information.
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          readOnly: true
        description:
          type: string
          readOnly: true
        status:
          allOf:
          - $ref: '#/components/schemas/StatusB4fEnum'
          readOnly: true
        priority:
          allOf:
          - $ref: '#/components/schemas/PriorityEnum'
          readOnly: true
        position:
          type: integer
          readOnly: true
          description: Position in the Kanban column (lower = higher priority)
        estimated_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          readOnly: true
          nullable: true
        due_date:
          type: string
          format: date
          readOnly: true
          nullable: true
        completed_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        assigned_to_name:
          type: string
          readOnly: true
        hours_logged:
          type: string
          readOnly: true
        comments:
          type: string
          readOnly: true
        progress_percentage:
          type: string
          readOnly: true
      required:
      - assigned_to_name
      - comments
      - completed_at
      - created_at
      - description
      - due_date
      - estimated_hours
      - hours_logged
      - id
      - position
      - priority
      - progress_percentage
      - status
      - title
      - updated_at
    Contract:
      type: object
      description: Serializer for Contract model.
      properties:
        id:
          type: integer
          readOnly: true
        client:
          type: integer
          description: The post-sale client this contract is with
        client_name:
          type: string
          readOnly: true
        proposal:
          type: integer
          nullable: true
          description: The proposal that led to this contract (if applicable)
        proposal_number:
          type: string
          readOnly: true
        signed_by:
          type: integer
          nullable: true
          description: The consultant who signed this contract
        signed_by_name:
          type: string
          readOnly: true
        contract_number:
          type: string
          maxLength: 50
        title:
          type: string
          maxLength: 255
        description:
          type: string
          description: Statement of work, deliverables, terms
        status:
          $ref: '#/components/schemas/StatusB45Enum'
        total_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        currency:
          type: string
          maxLength: 3
        payment_terms:
          $ref: '#/components/schemas/PaymentTermsEnum'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        signed_date:
          type: string
          format: date
          nullable: true
        contract_file_url:
          type: string
          format: uri
          description: Link to signed contract PDF in S3
          maxLength: 200
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        notes:
          type: string
      required:
      - client
      - client_name
      - contract_number
      - created_at
      - description
      - end_date
      - id
      - proposal_number
      - signed_by_name
      - start_date
      - title
      - total_value
      - updated_at
    ContractRequest:
      type: object
      description: Serializer for Contract model.
      properties:
        client:
          type: integer
          description: The post-sale client this contract is with
        proposal:
          type: integer
          nullable: true
          description: The proposal that led to this contract (if applicable)
        signed_by:
          type: integer
          nullable: true
          description: The consultant who signed this contract
        contract_number:
          type: string
          minLength: 1
          maxLength: 50
        title:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
          description: Statement of work, deliverables, terms
        status:
          $ref: '#/components/schemas/StatusB45Enum'
        total_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        payment_terms:
          $ref: '#/components/schemas/PaymentTermsEnum'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        signed_date:
          type: string
          format: date
          nullable: true
        contract_file_url:
          type: string
          format: uri
          description: Link to signed contract PDF in S3
          maxLength: 200
        notes:
          type: string
      required:
      - client
      - contract_number
      - description
      - end_date
      - start_date
      - title
      - total_value
    Document:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        folder_name:
          type: string
          readOnly: true
        client_name:
          type: string
          readOnly: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        visibility:
          allOf:
          - $ref: '#/components/schemas/VisibilityEnum'
          description: |-
            Can clients see this document in the portal?

            * `internal` - Internal Only
            * `client` - Visible to Client
        file_type:
          type: string
          description: MIME type (e.g., application/pdf, image/png)
          maxLength: 50
        file_size_bytes:
          type: integer
          description: File size in bytes
        s3_key:
          type: string
          description: Encrypted S3 object key (path in bucket, unique per firm)
        s3_bucket:
          type: string
          description: Encrypted S3 bucket name
        s3_fingerprint:
          type: string
          readOnly: true
          default: ''
          description: Deterministic fingerprint for uniqueness checks
        current_version:
          type: integer
          description: Current version number
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        firm:
          type: integer
          description: Firm (workspace) this document belongs to
        folder:
          type: integer
        client:
          type: integer
          description: Denormalized for quick filtering (post-sale client)
        project:
          type: integer
          nullable: true
          description: 'Optional: link to specific project'
        uploaded_by:
          type: integer
          nullable: true
      required:
      - client
      - client_name
      - created_at
      - file_size_bytes
      - file_type
      - firm
      - folder
      - folder_name
      - id
      - name
      - s3_bucket
      - s3_fingerprint
      - s3_key
      - updated_at
    DocumentRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        visibility:
          allOf:
          - $ref: '#/components/schemas/VisibilityEnum'
          description: |-
            Can clients see this document in the portal?

            * `internal` - Internal Only
            * `client` - Visible to Client
        file_type:
          type: string
          minLength: 1
          description: MIME type (e.g., application/pdf, image/png)
          maxLength: 50
        file_size_bytes:
          type: integer
          description: File size in bytes
        s3_key:
          type: string
          minLength: 1
          description: Encrypted S3 object key (path in bucket, unique per firm)
        s3_bucket:
          type: string
          minLength: 1
          description: Encrypted S3 bucket name
        current_version:
          type: integer
          description: Current version number
        firm:
          type: integer
          description: Firm (workspace) this document belongs to
        folder:
          type: integer
        client:
          type: integer
          description: Denormalized for quick filtering (post-sale client)
        project:
          type: integer
          nullable: true
          description: 'Optional: link to specific project'
        uploaded_by:
          type: integer
          nullable: true
      required:
      - client
      - file_size_bytes
      - file_type
      - firm
      - folder
      - name
      - s3_bucket
      - s3_key
    EntryTypeEnum:
      enum:
      - debit
      - credit
      type: string
      description: |-
        * `debit` - Debit
        * `credit` - Credit
    Folder:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        client_name:
          type: string
          readOnly: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        visibility:
          allOf:
          - $ref: '#/components/schemas/VisibilityEnum'
          description: |-
            Can clients see this folder in the portal?

            * `internal` - Internal Only
            * `client` - Visible to Client
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        firm:
          type: integer
          description: Firm (workspace) this folder belongs to
        client:
          type: integer
          description: The post-sale client who owns this folder
        project:
          type: integer
          nullable: true
          description: 'Optional: link to specific project'
        parent:
          type: integer
          nullable: true
          description: Parent folder (null = root folder)
        created_by:
          type: integer
          nullable: true
      required:
      - client
      - client_name
      - created_at
      - firm
      - id
      - name
      - parent
      - updated_at
    FolderRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        visibility:
          allOf:
          - $ref: '#/components/schemas/VisibilityEnum'
          description: |-
            Can clients see this folder in the portal?

            * `internal` - Internal Only
            * `client` - Visible to Client
        firm:
          type: integer
          description: Firm (workspace) this folder belongs to
        client:
          type: integer
          description: The post-sale client who owns this folder
        project:
          type: integer
          nullable: true
          description: 'Optional: link to specific project'
        parent:
          type: integer
          nullable: true
          description: Parent folder (null = root folder)
        created_by:
          type: integer
          nullable: true
      required:
      - client
      - firm
      - name
      - parent
    Invoice:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        client_name:
          type: string
          readOnly: true
        project_name:
          type: string
          readOnly: true
        balance_due:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
        engagement_override:
          type: boolean
          description: True if Master Admin overrode default engagement linkage
        engagement_override_reason:
          type: string
          description: Reason for engagement override (required if overridden)
        invoice_number:
          type: string
          maxLength: 50
        status:
          $ref: '#/components/schemas/StatusC6dEnum'
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        tax_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        amount_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Total amount received from client
        currency:
          type: string
          maxLength: 3
        issue_date:
          type: string
          format: date
        due_date:
          type: string
          format: date
        payment_terms:
          type: string
          description: e.g., Net 30, Due on Receipt
          maxLength: 50
        period_start:
          type: string
          format: date
          nullable: true
          description: Start date for billing period (package invoices)
        period_end:
          type: string
          format: date
          nullable: true
          description: End date for billing period (package invoices)
        is_auto_generated:
          type: boolean
          description: True if invoice was generated by scheduler
        paid_date:
          type: string
          format: date
          nullable: true
          description: Date when invoice was fully paid
        payment_failed_at:
          type: string
          format: date-time
          nullable: true
          description: When payment attempt failed
        payment_failure_reason:
          type: string
          description: Reason for payment failure (from processor)
          maxLength: 255
        payment_failure_code:
          type: string
          description: Processor error code
          maxLength: 50
        payment_retry_count:
          type: integer
          description: Number of payment retry attempts
        last_payment_retry_at:
          type: string
          format: date-time
          nullable: true
          description: When last payment retry was attempted
        stripe_payment_intent_id:
          type: string
          description: Stripe Payment Intent ID for tracking
          maxLength: 255
        line_items:
          description: 'List of line items: [{description, quantity, rate, amount},
            ...]'
        notes:
          type: string
          description: Notes visible to client on invoice
        stripe_invoice_id:
          type: string
          description: Stripe Invoice ID if using Stripe billing
          maxLength: 255
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        firm:
          type: integer
          description: Firm (workspace) this invoice belongs to
        client:
          type: integer
          description: The post-sale client being invoiced
        engagement:
          type: integer
          nullable: true
          description: Engagement this invoice belongs to (Master Admin can override)
        engagement_override_by:
          type: integer
          nullable: true
          description: Master Admin who overrode engagement
        project:
          type: integer
          nullable: true
          description: 'Optional: link to specific project'
        created_by:
          type: integer
          nullable: true
      required:
      - balance_due
      - client
      - client_name
      - created_at
      - due_date
      - engagement
      - firm
      - id
      - invoice_number
      - issue_date
      - period_start
      - project_name
      - subtotal
      - total_amount
      - updated_at
    InvoiceRequest:
      type: object
      properties:
        engagement_override:
          type: boolean
          description: True if Master Admin overrode default engagement linkage
        engagement_override_reason:
          type: string
          description: Reason for engagement override (required if overridden)
        invoice_number:
          type: string
          minLength: 1
          maxLength: 50
        status:
          $ref: '#/components/schemas/StatusC6dEnum'
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        tax_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        amount_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Total amount received from client
        currency:
          type: string
          minLength: 1
          maxLength: 3
        issue_date:
          type: string
          format: date
        due_date:
          type: string
          format: date
        payment_terms:
          type: string
          minLength: 1
          description: e.g., Net 30, Due on Receipt
          maxLength: 50
        period_start:
          type: string
          format: date
          nullable: true
          description: Start date for billing period (package invoices)
        period_end:
          type: string
          format: date
          nullable: true
          description: End date for billing period (package invoices)
        is_auto_generated:
          type: boolean
          description: True if invoice was generated by scheduler
        paid_date:
          type: string
          format: date
          nullable: true
          description: Date when invoice was fully paid
        payment_failed_at:
          type: string
          format: date-time
          nullable: true
          description: When payment attempt failed
        payment_failure_reason:
          type: string
          description: Reason for payment failure (from processor)
          maxLength: 255
        payment_failure_code:
          type: string
          description: Processor error code
          maxLength: 50
        payment_retry_count:
          type: integer
          description: Number of payment retry attempts
        last_payment_retry_at:
          type: string
          format: date-time
          nullable: true
          description: When last payment retry was attempted
        stripe_payment_intent_id:
          type: string
          description: Stripe Payment Intent ID for tracking
          maxLength: 255
        line_items:
          description: 'List of line items: [{description, quantity, rate, amount},
            ...]'
        notes:
          type: string
          description: Notes visible to client on invoice
        stripe_invoice_id:
          type: string
          description: Stripe Invoice ID if using Stripe billing
          maxLength: 255
        firm:
          type: integer
          description: Firm (workspace) this invoice belongs to
        client:
          type: integer
          description: The post-sale client being invoiced
        engagement:
          type: integer
          nullable: true
          description: Engagement this invoice belongs to (Master Admin can override)
        engagement_override_by:
          type: integer
          nullable: true
          description: Master Admin who overrode engagement
        project:
          type: integer
          nullable: true
          description: 'Optional: link to specific project'
        created_by:
          type: integer
          nullable: true
      required:
      - client
      - due_date
      - engagement
      - firm
      - invoice_number
      - issue_date
      - period_start
      - subtotal
      - total_amount
    Lead:
      type: object
      description: Serializer for Lead model.
      properties:
        id:
          type: integer
          readOnly: true
        company_name:
          type: string
          maxLength: 255
        industry:
          type: string
          maxLength: 100
        website:
          type: string
          format: uri
          maxLength: 200
        contact_name:
          type: string
          maxLength: 255
        contact_email:
          type: string
          format: email
          maxLength: 254
        contact_phone:
          type: string
          maxLength: 50
        contact_title:
          type: string
          maxLength: 100
        source:
          $ref: '#/components/schemas/SourceEnum'
        status:
          $ref: '#/components/schemas/LeadStatusEnum'
        lead_score:
          type: integer
          description: Automated or manual lead scoring (0-100)
        campaign:
          type: integer
          nullable: true
          description: Marketing campaign that generated this lead
        campaign_name:
          type: string
          readOnly: true
        assigned_to:
          type: integer
          nullable: true
          description: Sales rep assigned to this lead
        assigned_to_name:
          type: string
          readOnly: true
        captured_date:
          type: string
          format: date
          readOnly: true
        first_contacted:
          type: string
          format: date
          nullable: true
        qualified_date:
          type: string
          format: date
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        notes:
          type: string
      required:
      - assigned_to_name
      - campaign_name
      - captured_date
      - company_name
      - contact_email
      - contact_name
      - created_at
      - id
      - updated_at
    LeadRequest:
      type: object
      description: Serializer for Lead model.
      properties:
        company_name:
          type: string
          minLength: 1
          maxLength: 255
        industry:
          type: string
          maxLength: 100
        website:
          type: string
          format: uri
          maxLength: 200
        contact_name:
          type: string
          minLength: 1
          maxLength: 255
        contact_email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        contact_phone:
          type: string
          maxLength: 50
        contact_title:
          type: string
          maxLength: 100
        source:
          $ref: '#/components/schemas/SourceEnum'
        status:
          $ref: '#/components/schemas/LeadStatusEnum'
        lead_score:
          type: integer
          description: Automated or manual lead scoring (0-100)
        campaign:
          type: integer
          nullable: true
          description: Marketing campaign that generated this lead
        assigned_to:
          type: integer
          nullable: true
          description: Sales rep assigned to this lead
        first_contacted:
          type: string
          format: date
          nullable: true
        qualified_date:
          type: string
          format: date
          nullable: true
        notes:
          type: string
      required:
      - company_name
      - contact_email
      - contact_name
    LeadStatusEnum:
      enum:
      - new
      - contacted
      - qualified
      - converted
      - lost
      type: string
      description: |-
        * `new` - New Lead
        * `contacted` - Contacted
        * `qualified` - Qualified - Moving to Sales
        * `converted` - Converted to Prospect
        * `lost` - Lost
    LedgerEntry:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        invoice_number:
          type: string
          readOnly: true
        bill_reference:
          type: string
          readOnly: true
        entry_type:
          $ref: '#/components/schemas/EntryTypeEnum'
        account:
          $ref: '#/components/schemas/AccountEnum'
        amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        transaction_date:
          type: string
          format: date
        description:
          type: string
          maxLength: 255
        transaction_group_id:
          type: string
          description: UUID to group related debit/credit entries
          maxLength: 50
        created_at:
          type: string
          format: date-time
          readOnly: true
        firm:
          type: integer
          description: Firm (workspace) this ledger entry belongs to
        invoice:
          type: integer
          nullable: true
        bill:
          type: integer
          nullable: true
        created_by:
          type: integer
          nullable: true
      required:
      - account
      - amount
      - bill_reference
      - created_at
      - description
      - entry_type
      - firm
      - id
      - invoice_number
      - transaction_date
      - transaction_group_id
    LedgerEntryRequest:
      type: object
      properties:
        entry_type:
          $ref: '#/components/schemas/EntryTypeEnum'
        account:
          $ref: '#/components/schemas/AccountEnum'
        amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        transaction_date:
          type: string
          format: date
        description:
          type: string
          minLength: 1
          maxLength: 255
        transaction_group_id:
          type: string
          minLength: 1
          description: UUID to group related debit/credit entries
          maxLength: 50
        firm:
          type: integer
          description: Firm (workspace) this ledger entry belongs to
        invoice:
          type: integer
          nullable: true
        bill:
          type: integer
          nullable: true
        created_by:
          type: integer
          nullable: true
      required:
      - account
      - amount
      - description
      - entry_type
      - firm
      - transaction_date
      - transaction_group_id
    MaintenanceLog:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        asset_tag:
          type: string
          readOnly: true
        asset_name:
          type: string
          readOnly: true
        maintenance_type:
          $ref: '#/components/schemas/MaintenanceTypeEnum'
        status:
          $ref: '#/components/schemas/MaintenanceLogStatusEnum'
        description:
          type: string
          description: What maintenance was performed?
        scheduled_date:
          type: string
          format: date
        completed_date:
          type: string
          format: date
          nullable: true
        performed_by:
          type: string
          description: Technician name or company
          maxLength: 255
        vendor:
          type: string
          description: Service provider company
          maxLength: 255
        cost:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Cost of maintenance/repair
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        firm:
          type: integer
          description: Firm (workspace) this maintenance log belongs to
        asset:
          type: integer
        created_by:
          type: integer
          nullable: true
      required:
      - asset
      - asset_name
      - asset_tag
      - cost
      - created_at
      - description
      - firm
      - id
      - maintenance_type
      - performed_by
      - scheduled_date
      - updated_at
    MaintenanceLogRequest:
      type: object
      properties:
        maintenance_type:
          $ref: '#/components/schemas/MaintenanceTypeEnum'
        status:
          $ref: '#/components/schemas/MaintenanceLogStatusEnum'
        description:
          type: string
          minLength: 1
          description: What maintenance was performed?
        scheduled_date:
          type: string
          format: date
        completed_date:
          type: string
          format: date
          nullable: true
        performed_by:
          type: string
          minLength: 1
          description: Technician name or company
          maxLength: 255
        vendor:
          type: string
          description: Service provider company
          maxLength: 255
        cost:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Cost of maintenance/repair
        firm:
          type: integer
          description: Firm (workspace) this maintenance log belongs to
        asset:
          type: integer
        created_by:
          type: integer
          nullable: true
      required:
      - asset
      - cost
      - description
      - firm
      - maintenance_type
      - performed_by
      - scheduled_date
    MaintenanceLogStatusEnum:
      enum:
      - scheduled
      - in_progress
      - completed
      - cancelled
      type: string
      description: |-
        * `scheduled` - Scheduled
        * `in_progress` - In Progress
        * `completed` - Completed
        * `cancelled` - Cancelled
    MaintenanceTypeEnum:
      enum:
      - repair
      - preventive
      - upgrade
      - inspection
      - other
      type: string
      description: |-
        * `repair` - Repair
        * `preventive` - Preventive Maintenance
        * `upgrade` - Upgrade
        * `inspection` - Inspection
        * `other` - Other
    MessageTypeEnum:
      enum:
      - text
      - file
      - system
      type: string
      description: |-
        * `text` - Text Message
        * `file` - File Attachment
        * `system` - System Notification
    Organization:
      type: object
      description: |-
        Serializer for Organization model.

        TIER 2.6: Organizations enable cross-client collaboration within a firm.
      properties:
        id:
          type: integer
          readOnly: true
        firm:
          type: integer
          readOnly: true
          description: Firm this organization belongs to
        name:
          type: string
          description: Organization name (e.g., 'Acme Corp')
          maxLength: 255
        description:
          type: string
          description: Description of this organization
        enable_cross_client_visibility:
          type: boolean
          description: Whether clients in this org can see each other's data (where
            appropriate)
        client_count:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        created_by:
          type: integer
          readOnly: true
          nullable: true
          description: Firm user who created this organization
        created_by_name:
          type: string
          readOnly: true
      required:
      - client_count
      - created_at
      - created_by
      - created_by_name
      - firm
      - id
      - name
      - updated_at
    OrganizationRequest:
      type: object
      description: |-
        Serializer for Organization model.

        TIER 2.6: Organizations enable cross-client collaboration within a firm.
      properties:
        name:
          type: string
          minLength: 1
          description: Organization name (e.g., 'Acme Corp')
          maxLength: 255
        description:
          type: string
          description: Description of this organization
        enable_cross_client_visibility:
          type: boolean
          description: Whether clients in this org can see each other's data (where
            appropriate)
      required:
      - name
    PaginatedAssetList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Asset'
    PaginatedBillList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Bill'
    PaginatedCampaignList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Campaign'
    PaginatedClientChatThreadList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientChatThread'
    PaginatedClientCommentList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientComment'
    PaginatedClientContractList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientContract'
    PaginatedClientEngagementDetailList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientEngagementDetail'
    PaginatedClientEngagementList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientEngagement'
    PaginatedClientInvoiceList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientInvoice'
    PaginatedClientList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Client'
    PaginatedClientMessageList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientMessage'
    PaginatedClientNoteList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientNote'
    PaginatedClientPortalUserList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientPortalUser'
    PaginatedClientProjectList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientProject'
    PaginatedClientProposalList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientProposal'
    PaginatedContractList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Contract'
    PaginatedDocumentList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Document'
    PaginatedFolderList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Folder'
    PaginatedInvoiceList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Invoice'
    PaginatedLeadList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Lead'
    PaginatedLedgerEntryList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/LedgerEntry'
    PaginatedMaintenanceLogList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/MaintenanceLog'
    PaginatedOrganizationList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Organization'
    PaginatedProjectList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Project'
    PaginatedProposalList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Proposal'
    PaginatedProspectList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Prospect'
    PaginatedTaskList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Task'
    PaginatedTimeEntryList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/TimeEntry'
    PaginatedVersionList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Version'
    PatchedAssetRequest:
      type: object
      properties:
        asset_tag:
          type: string
          minLength: 1
          description: Unique identifier per firm (e.g., barcode, serial number)
          maxLength: 50
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        category:
          $ref: '#/components/schemas/CategoryEnum'
        status:
          $ref: '#/components/schemas/AssetStatusEnum'
        purchase_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Original purchase price
        purchase_date:
          type: string
          format: date
        vendor:
          type: string
          description: Where was this purchased?
          maxLength: 255
        useful_life_years:
          type: integer
          description: Expected useful life for depreciation calculation
        salvage_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Expected value at end of useful life
        manufacturer:
          type: string
          maxLength: 255
        model_number:
          type: string
          maxLength: 100
        serial_number:
          type: string
          maxLength: 100
        location:
          type: string
          description: Physical location (e.g., office, warehouse)
          maxLength: 255
        warranty_expiration:
          type: string
          format: date
          nullable: true
        notes:
          type: string
        firm:
          type: integer
          description: Firm (workspace) this asset belongs to
        assigned_to:
          type: integer
          nullable: true
          description: The user currently using this asset
    PatchedBillRequest:
      type: object
      properties:
        vendor_name:
          type: string
          minLength: 1
          maxLength: 255
        vendor_email:
          type: string
          format: email
          maxLength: 254
        bill_number:
          type: string
          minLength: 1
          description: Vendor's bill/invoice number
          maxLength: 50
        reference_number:
          type: string
          minLength: 1
          description: Our internal reference number (unique per firm)
          maxLength: 50
        status:
          $ref: '#/components/schemas/BillStatusEnum'
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        tax_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        amount_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Total amount paid to vendor
        currency:
          type: string
          minLength: 1
          maxLength: 3
        bill_date:
          type: string
          format: date
          description: Date on vendor's bill
        due_date:
          type: string
          format: date
        paid_date:
          type: string
          format: date
          nullable: true
          description: Date when bill was fully paid
        expense_category:
          type: string
          minLength: 1
          description: e.g., Software, Travel, Office Supplies
          maxLength: 100
        description:
          type: string
        line_items:
          description: 'List of line items: [{description, quantity, rate, amount},
            ...]'
        firm:
          type: integer
          description: Firm (workspace) this bill belongs to
        project:
          type: integer
          nullable: true
          description: 'Optional: link to project if this is a project expense'
        approved_by:
          type: integer
          nullable: true
    PatchedCampaignRequest:
      type: object
      description: Serializer for Campaign model.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        type:
          $ref: '#/components/schemas/TypeEnum'
        status:
          $ref: '#/components/schemas/CampaignStatusEnum'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        budget:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        actual_cost:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        targeted_clients:
          type: array
          items:
            type: integer
          description: Existing clients targeted by this campaign (renewals, upsells,
            etc.)
        target_leads:
          type: integer
          description: Target number of new leads
        opportunities_created:
          type: integer
          description: Number of Prospects created from campaign leads
        revenue_generated:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Revenue from won deals (new + renewal) attributed to this campaign
        owner:
          type: integer
          nullable: true
    PatchedChangePasswordRequest:
      type: object
      description: Serializer for password change.
      properties:
        old_password:
          type: string
          writeOnly: true
          minLength: 1
        new_password:
          type: string
          writeOnly: true
          minLength: 1
    PatchedClientChatThreadRequest:
      type: object
      description: Serializer for ClientChatThread model.
      properties:
        client:
          type: integer
          description: Client this thread belongs to
        date:
          type: string
          format: date
          description: Date of this thread (YYYY-MM-DD)
        is_active:
          type: boolean
          description: Whether this is the current active thread
    PatchedClientCommentRequest:
      type: object
      description: Serializer for ClientComment model.
      properties:
        client:
          type: integer
          description: Client who owns this comment
        task:
          type: integer
          description: Task being commented on
        comment:
          type: string
          minLength: 1
        has_attachment:
          type: boolean
          description: Whether this comment has file attachments
    PatchedClientEngagementRequest:
      type: object
      description: Serializer for ClientEngagement model.
      properties:
        client:
          type: integer
        contract:
          type: integer
        status:
          $ref: '#/components/schemas/Status619Enum'
        version:
          type: integer
          default: 1
          description: Version number for this engagement (1, 2, 3...)
        parent_engagement:
          type: integer
          nullable: true
          description: Previous engagement if this is a renewal
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        actual_end_date:
          type: string
          format: date
          nullable: true
          description: Actual completion date if different from planned
        contracted_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        actual_revenue:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Actual revenue generated (may differ from contracted)
        notes:
          type: string
    PatchedClientMessageRequest:
      type: object
      description: Serializer for ClientMessage model.
      properties:
        thread:
          type: integer
          description: Thread this message belongs to
        message_type:
          $ref: '#/components/schemas/MessageTypeEnum'
        content:
          type: string
          minLength: 1
          description: Message text content
        attachment_url:
          type: string
          format: uri
          description: S3 URL for file attachment (if message_type=file)
          maxLength: 200
        attachment_filename:
          type: string
          description: Original filename of attachment
          maxLength: 255
        attachment_size_bytes:
          type: integer
          nullable: true
          description: File size in bytes
    PatchedClientNoteRequest:
      type: object
      description: Serializer for ClientNote model.
      properties:
        client:
          type: integer
        note:
          type: string
          minLength: 1
        is_pinned:
          type: boolean
          description: Pinned notes appear at top
    PatchedClientPortalUserRequest:
      type: object
      description: Serializer for ClientPortalUser model.
      properties:
        client:
          type: integer
        user:
          type: integer
        role:
          $ref: '#/components/schemas/RoleEnum'
        can_upload_documents:
          type: boolean
        can_view_billing:
          type: boolean
        can_message_team:
          type: boolean
        can_view_projects:
          type: boolean
        last_login:
          type: string
          format: date-time
          nullable: true
    PatchedClientRequest:
      type: object
      description: Serializer for Client model.
      properties:
        organization:
          type: integer
          nullable: true
          description: Optional organization for cross-client collaboration
        company_name:
          type: string
          minLength: 1
          maxLength: 255
        industry:
          type: string
          maxLength: 100
        primary_contact_name:
          type: string
          minLength: 1
          maxLength: 255
        primary_contact_email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        primary_contact_phone:
          type: string
          maxLength: 50
        street_address:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        country:
          type: string
          minLength: 1
          maxLength: 100
        website:
          type: string
          format: uri
          maxLength: 200
        employee_count:
          type: integer
          nullable: true
        status:
          $ref: '#/components/schemas/ClientStatusEnum'
        account_manager:
          type: integer
          nullable: true
          description: Primary account manager for this client
        assigned_team:
          type: array
          items:
            type: integer
          description: Team members assigned to this client
        portal_enabled:
          type: boolean
          description: Whether client portal access is enabled
        client_since:
          type: string
          format: date
          description: Date of first engagement
        notes:
          type: string
          description: Internal notes (not visible to client)
    PatchedContractRequest:
      type: object
      description: Serializer for Contract model.
      properties:
        client:
          type: integer
          description: The post-sale client this contract is with
        proposal:
          type: integer
          nullable: true
          description: The proposal that led to this contract (if applicable)
        signed_by:
          type: integer
          nullable: true
          description: The consultant who signed this contract
        contract_number:
          type: string
          minLength: 1
          maxLength: 50
        title:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
          description: Statement of work, deliverables, terms
        status:
          $ref: '#/components/schemas/StatusB45Enum'
        total_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        payment_terms:
          $ref: '#/components/schemas/PaymentTermsEnum'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        signed_date:
          type: string
          format: date
          nullable: true
        contract_file_url:
          type: string
          format: uri
          description: Link to signed contract PDF in S3
          maxLength: 200
        notes:
          type: string
    PatchedDocumentRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        visibility:
          allOf:
          - $ref: '#/components/schemas/VisibilityEnum'
          description: |-
            Can clients see this document in the portal?

            * `internal` - Internal Only
            * `client` - Visible to Client
        file_type:
          type: string
          minLength: 1
          description: MIME type (e.g., application/pdf, image/png)
          maxLength: 50
        file_size_bytes:
          type: integer
          description: File size in bytes
        s3_key:
          type: string
          minLength: 1
          description: Encrypted S3 object key (path in bucket, unique per firm)
        s3_bucket:
          type: string
          minLength: 1
          description: Encrypted S3 bucket name
        current_version:
          type: integer
          description: Current version number
        firm:
          type: integer
          description: Firm (workspace) this document belongs to
        folder:
          type: integer
        client:
          type: integer
          description: Denormalized for quick filtering (post-sale client)
        project:
          type: integer
          nullable: true
          description: 'Optional: link to specific project'
        uploaded_by:
          type: integer
          nullable: true
    PatchedFolderRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        visibility:
          allOf:
          - $ref: '#/components/schemas/VisibilityEnum'
          description: |-
            Can clients see this folder in the portal?

            * `internal` - Internal Only
            * `client` - Visible to Client
        firm:
          type: integer
          description: Firm (workspace) this folder belongs to
        client:
          type: integer
          description: The post-sale client who owns this folder
        project:
          type: integer
          nullable: true
          description: 'Optional: link to specific project'
        parent:
          type: integer
          nullable: true
          description: Parent folder (null = root folder)
        created_by:
          type: integer
          nullable: true
    PatchedInvoiceRequest:
      type: object
      properties:
        engagement_override:
          type: boolean
          description: True if Master Admin overrode default engagement linkage
        engagement_override_reason:
          type: string
          description: Reason for engagement override (required if overridden)
        invoice_number:
          type: string
          minLength: 1
          maxLength: 50
        status:
          $ref: '#/components/schemas/StatusC6dEnum'
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        tax_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        amount_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Total amount received from client
        currency:
          type: string
          minLength: 1
          maxLength: 3
        issue_date:
          type: string
          format: date
        due_date:
          type: string
          format: date
        payment_terms:
          type: string
          minLength: 1
          description: e.g., Net 30, Due on Receipt
          maxLength: 50
        period_start:
          type: string
          format: date
          nullable: true
          description: Start date for billing period (package invoices)
        period_end:
          type: string
          format: date
          nullable: true
          description: End date for billing period (package invoices)
        is_auto_generated:
          type: boolean
          description: True if invoice was generated by scheduler
        paid_date:
          type: string
          format: date
          nullable: true
          description: Date when invoice was fully paid
        payment_failed_at:
          type: string
          format: date-time
          nullable: true
          description: When payment attempt failed
        payment_failure_reason:
          type: string
          description: Reason for payment failure (from processor)
          maxLength: 255
        payment_failure_code:
          type: string
          description: Processor error code
          maxLength: 50
        payment_retry_count:
          type: integer
          description: Number of payment retry attempts
        last_payment_retry_at:
          type: string
          format: date-time
          nullable: true
          description: When last payment retry was attempted
        stripe_payment_intent_id:
          type: string
          description: Stripe Payment Intent ID for tracking
          maxLength: 255
        line_items:
          description: 'List of line items: [{description, quantity, rate, amount},
            ...]'
        notes:
          type: string
          description: Notes visible to client on invoice
        stripe_invoice_id:
          type: string
          description: Stripe Invoice ID if using Stripe billing
          maxLength: 255
        firm:
          type: integer
          description: Firm (workspace) this invoice belongs to
        client:
          type: integer
          description: The post-sale client being invoiced
        engagement:
          type: integer
          nullable: true
          description: Engagement this invoice belongs to (Master Admin can override)
        engagement_override_by:
          type: integer
          nullable: true
          description: Master Admin who overrode engagement
        project:
          type: integer
          nullable: true
          description: 'Optional: link to specific project'
        created_by:
          type: integer
          nullable: true
    PatchedLeadRequest:
      type: object
      description: Serializer for Lead model.
      properties:
        company_name:
          type: string
          minLength: 1
          maxLength: 255
        industry:
          type: string
          maxLength: 100
        website:
          type: string
          format: uri
          maxLength: 200
        contact_name:
          type: string
          minLength: 1
          maxLength: 255
        contact_email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        contact_phone:
          type: string
          maxLength: 50
        contact_title:
          type: string
          maxLength: 100
        source:
          $ref: '#/components/schemas/SourceEnum'
        status:
          $ref: '#/components/schemas/LeadStatusEnum'
        lead_score:
          type: integer
          description: Automated or manual lead scoring (0-100)
        campaign:
          type: integer
          nullable: true
          description: Marketing campaign that generated this lead
        assigned_to:
          type: integer
          nullable: true
          description: Sales rep assigned to this lead
        first_contacted:
          type: string
          format: date
          nullable: true
        qualified_date:
          type: string
          format: date
          nullable: true
        notes:
          type: string
    PatchedLedgerEntryRequest:
      type: object
      properties:
        entry_type:
          $ref: '#/components/schemas/EntryTypeEnum'
        account:
          $ref: '#/components/schemas/AccountEnum'
        amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        transaction_date:
          type: string
          format: date
        description:
          type: string
          minLength: 1
          maxLength: 255
        transaction_group_id:
          type: string
          minLength: 1
          description: UUID to group related debit/credit entries
          maxLength: 50
        firm:
          type: integer
          description: Firm (workspace) this ledger entry belongs to
        invoice:
          type: integer
          nullable: true
        bill:
          type: integer
          nullable: true
        created_by:
          type: integer
          nullable: true
    PatchedMaintenanceLogRequest:
      type: object
      properties:
        maintenance_type:
          $ref: '#/components/schemas/MaintenanceTypeEnum'
        status:
          $ref: '#/components/schemas/MaintenanceLogStatusEnum'
        description:
          type: string
          minLength: 1
          description: What maintenance was performed?
        scheduled_date:
          type: string
          format: date
        completed_date:
          type: string
          format: date
          nullable: true
        performed_by:
          type: string
          minLength: 1
          description: Technician name or company
          maxLength: 255
        vendor:
          type: string
          description: Service provider company
          maxLength: 255
        cost:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Cost of maintenance/repair
        firm:
          type: integer
          description: Firm (workspace) this maintenance log belongs to
        asset:
          type: integer
        created_by:
          type: integer
          nullable: true
    PatchedOrganizationRequest:
      type: object
      description: |-
        Serializer for Organization model.

        TIER 2.6: Organizations enable cross-client collaboration within a firm.
      properties:
        name:
          type: string
          minLength: 1
          description: Organization name (e.g., 'Acme Corp')
          maxLength: 255
        description:
          type: string
          description: Description of this organization
        enable_cross_client_visibility:
          type: boolean
          description: Whether clients in this org can see each other's data (where
            appropriate)
    PatchedProjectRequest:
      type: object
      description: Enhanced Project serializer with validation.
      properties:
        client:
          type: integer
          description: The post-sale client this project belongs to
        contract:
          type: integer
          nullable: true
          description: The contract governing this project (if applicable)
        project_manager:
          type: integer
          nullable: true
          description: The lead consultant managing this project
        project_code:
          type: string
          minLength: 1
          maxLength: 50
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        status:
          $ref: '#/components/schemas/Status452Enum'
        billing_type:
          $ref: '#/components/schemas/BillingTypeEnum'
        budget:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          nullable: true
          description: Total project budget
        hourly_rate:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Default hourly rate for time tracking
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        actual_completion_date:
          type: string
          format: date
          nullable: true
        notes:
          type: string
    PatchedProposalRequest:
      type: object
      description: Serializer for Proposal model.
      properties:
        proposal_type:
          allOf:
          - $ref: '#/components/schemas/ProposalTypeEnum'
          description: |-
            Type of proposal: new business, expansion, or renewal

            * `prospective_client` - Prospective Client - New Business
            * `update_client` - Update Client - Expansion/Upsell
            * `renewal_client` - Renewal Client - Contract Renewal
        prospect:
          type: integer
          nullable: true
          description: For prospective_client proposals (new business)
        client:
          type: integer
          nullable: true
          description: For update_client or renewal_client proposals
        created_by:
          type: integer
          nullable: true
        proposal_number:
          type: string
          minLength: 1
          maxLength: 50
        title:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
          description: Scope of work, deliverables, timeline
        status:
          $ref: '#/components/schemas/Status97cEnum'
        total_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        valid_until:
          type: string
          format: date
          description: Proposal expiration date
        estimated_start_date:
          type: string
          format: date
          nullable: true
        estimated_end_date:
          type: string
          format: date
          nullable: true
        auto_create_project:
          type: boolean
          description: Auto-create initial project when accepted
        enable_portal_on_acceptance:
          type: boolean
          description: Enable client portal when proposal accepted (for prospective_client
            only)
    PatchedProspectRequest:
      type: object
      description: Serializer for Prospect model.
      properties:
        lead:
          type: integer
          nullable: true
          description: Original lead that created this prospect
        company_name:
          type: string
          minLength: 1
          maxLength: 255
        industry:
          type: string
          maxLength: 100
        website:
          type: string
          format: uri
          maxLength: 200
        employee_count:
          type: integer
          nullable: true
        annual_revenue:
          type: string
          format: decimal
          pattern: ^-?\d{0,13}(?:\.\d{0,2})?$
          nullable: true
          description: Estimated annual revenue
        primary_contact_name:
          type: string
          minLength: 1
          maxLength: 255
        primary_contact_email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        primary_contact_phone:
          type: string
          maxLength: 50
        primary_contact_title:
          type: string
          maxLength: 100
        street_address:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        country:
          type: string
          minLength: 1
          maxLength: 100
        pipeline_stage:
          $ref: '#/components/schemas/PipelineStageEnum'
        probability:
          type: integer
          description: Win probability percentage (0-100)
        estimated_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Estimated deal value
        close_date_estimate:
          type: string
          format: date
          description: Expected close date
        assigned_to:
          type: integer
          nullable: true
          description: Account executive assigned
        last_activity_date:
          type: string
          format: date
          nullable: true
        lost_reason:
          type: string
          maxLength: 255
        notes:
          type: string
    PatchedTaskRequest:
      type: object
      description: Enhanced Task serializer with validation.
      properties:
        project:
          type: integer
        assigned_to:
          type: integer
          nullable: true
        title:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        status:
          $ref: '#/components/schemas/StatusB4fEnum'
        priority:
          $ref: '#/components/schemas/PriorityEnum'
        position:
          type: integer
          description: Position in the Kanban column (lower = higher priority)
        estimated_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
        due_date:
          type: string
          format: date
          nullable: true
    PatchedTimeEntryRequest:
      type: object
      description: Enhanced TimeEntry serializer with validation.
      properties:
        project:
          type: integer
        task:
          type: integer
          nullable: true
          description: 'Optional: link to specific task'
        user:
          type: integer
        date:
          type: string
          format: date
        hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          description: Hours worked (e.g., 1.5 for 90 minutes)
        description:
          type: string
          minLength: 1
          description: What was accomplished during this time
        is_billable:
          type: boolean
        hourly_rate:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          description: Rate at time of entry (may differ from project default)
        invoiced:
          type: boolean
          description: Has this time been included in an invoice?
        invoice:
          type: integer
          nullable: true
          description: The invoice that includes this time entry
    PatchedVersionRequest:
      type: object
      properties:
        version_number:
          type: integer
        change_summary:
          type: string
          description: What changed in this version?
        file_type:
          type: string
          minLength: 1
          maxLength: 50
        file_size_bytes:
          type: integer
        s3_key:
          type: string
          minLength: 1
          description: Encrypted S3 object key for this version (unique per firm)
        s3_bucket:
          type: string
          minLength: 1
        firm:
          type: integer
          description: Firm (workspace) this version belongs to
        document:
          type: integer
        uploaded_by:
          type: integer
          nullable: true
    PaymentTermsEnum:
      enum:
      - net_15
      - net_30
      - net_45
      - net_60
      - due_on_receipt
      - milestone
      type: string
      description: |-
        * `net_15` - Net 15
        * `net_30` - Net 30
        * `net_45` - Net 45
        * `net_60` - Net 60
        * `due_on_receipt` - Due on Receipt
        * `milestone` - Milestone-based
    PipelineStageEnum:
      enum:
      - discovery
      - needs_analysis
      - proposal
      - negotiation
      - won
      - lost
      type: string
      description: |-
        * `discovery` - Discovery
        * `needs_analysis` - Needs Analysis
        * `proposal` - Proposal Sent
        * `negotiation` - Negotiation
        * `won` - Won - Converting to Client
        * `lost` - Lost
    PriorityEnum:
      enum:
      - low
      - medium
      - high
      - urgent
      type: string
      description: |-
        * `low` - Low
        * `medium` - Medium
        * `high` - High
        * `urgent` - Urgent
    Project:
      type: object
      description: Enhanced Project serializer with validation.
      properties:
        id:
          type: integer
          readOnly: true
        client:
          type: integer
          description: The post-sale client this project belongs to
        client_name:
          type: string
          readOnly: true
        contract:
          type: integer
          nullable: true
          description: The contract governing this project (if applicable)
        contract_number:
          type: string
          readOnly: true
          nullable: true
        project_manager:
          type: integer
          nullable: true
          description: The lead consultant managing this project
        project_code:
          type: string
          maxLength: 50
        name:
          type: string
          maxLength: 255
        description:
          type: string
        status:
          $ref: '#/components/schemas/Status452Enum'
        billing_type:
          $ref: '#/components/schemas/BillingTypeEnum'
        budget:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          nullable: true
          description: Total project budget
        hourly_rate:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Default hourly rate for time tracking
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        actual_completion_date:
          type: string
          format: date
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        notes:
          type: string
        total_hours_logged:
          type: string
          readOnly: true
        total_billed_amount:
          type: string
          readOnly: true
      required:
      - client
      - client_name
      - contract_number
      - created_at
      - end_date
      - id
      - name
      - project_code
      - start_date
      - total_billed_amount
      - total_hours_logged
      - updated_at
    ProjectRequest:
      type: object
      description: Enhanced Project serializer with validation.
      properties:
        client:
          type: integer
          description: The post-sale client this project belongs to
        contract:
          type: integer
          nullable: true
          description: The contract governing this project (if applicable)
        project_manager:
          type: integer
          nullable: true
          description: The lead consultant managing this project
        project_code:
          type: string
          minLength: 1
          maxLength: 50
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        status:
          $ref: '#/components/schemas/Status452Enum'
        billing_type:
          $ref: '#/components/schemas/BillingTypeEnum'
        budget:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          nullable: true
          description: Total project budget
        hourly_rate:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Default hourly rate for time tracking
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        actual_completion_date:
          type: string
          format: date
          nullable: true
        notes:
          type: string
      required:
      - client
      - end_date
      - name
      - project_code
      - start_date
    Proposal:
      type: object
      description: Serializer for Proposal model.
      properties:
        id:
          type: integer
          readOnly: true
        proposal_type:
          allOf:
          - $ref: '#/components/schemas/ProposalTypeEnum'
          description: |-
            Type of proposal: new business, expansion, or renewal

            * `prospective_client` - Prospective Client - New Business
            * `update_client` - Update Client - Expansion/Upsell
            * `renewal_client` - Renewal Client - Contract Renewal
        prospect:
          type: integer
          nullable: true
          description: For prospective_client proposals (new business)
        prospect_name:
          type: string
          readOnly: true
          nullable: true
        client:
          type: integer
          nullable: true
          description: For update_client or renewal_client proposals
        client_name:
          type: string
          readOnly: true
          nullable: true
        created_by:
          type: integer
          nullable: true
        created_by_name:
          type: string
          readOnly: true
        proposal_number:
          type: string
          maxLength: 50
        title:
          type: string
          maxLength: 255
        description:
          type: string
          description: Scope of work, deliverables, timeline
        status:
          $ref: '#/components/schemas/Status97cEnum'
        total_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        currency:
          type: string
          maxLength: 3
        valid_until:
          type: string
          format: date
          description: Proposal expiration date
        estimated_start_date:
          type: string
          format: date
          nullable: true
        estimated_end_date:
          type: string
          format: date
          nullable: true
        converted_to_engagement:
          type: boolean
          readOnly: true
          description: Whether this proposal has been converted to engagement/contract
        auto_create_project:
          type: boolean
          description: Auto-create initial project when accepted
        enable_portal_on_acceptance:
          type: boolean
          description: Enable client portal when proposal accepted (for prospective_client
            only)
        sent_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        accepted_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - accepted_at
      - client_name
      - converted_to_engagement
      - created_at
      - created_by_name
      - description
      - id
      - proposal_number
      - prospect_name
      - sent_at
      - title
      - total_value
      - updated_at
      - valid_until
    ProposalRequest:
      type: object
      description: Serializer for Proposal model.
      properties:
        proposal_type:
          allOf:
          - $ref: '#/components/schemas/ProposalTypeEnum'
          description: |-
            Type of proposal: new business, expansion, or renewal

            * `prospective_client` - Prospective Client - New Business
            * `update_client` - Update Client - Expansion/Upsell
            * `renewal_client` - Renewal Client - Contract Renewal
        prospect:
          type: integer
          nullable: true
          description: For prospective_client proposals (new business)
        client:
          type: integer
          nullable: true
          description: For update_client or renewal_client proposals
        created_by:
          type: integer
          nullable: true
        proposal_number:
          type: string
          minLength: 1
          maxLength: 50
        title:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
          description: Scope of work, deliverables, timeline
        status:
          $ref: '#/components/schemas/Status97cEnum'
        total_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        valid_until:
          type: string
          format: date
          description: Proposal expiration date
        estimated_start_date:
          type: string
          format: date
          nullable: true
        estimated_end_date:
          type: string
          format: date
          nullable: true
        auto_create_project:
          type: boolean
          description: Auto-create initial project when accepted
        enable_portal_on_acceptance:
          type: boolean
          description: Enable client portal when proposal accepted (for prospective_client
            only)
      required:
      - description
      - proposal_number
      - title
      - total_value
      - valid_until
    ProposalTypeEnum:
      enum:
      - prospective_client
      - update_client
      - renewal_client
      type: string
      description: |-
        * `prospective_client` - Prospective Client - New Business
        * `update_client` - Update Client - Expansion/Upsell
        * `renewal_client` - Renewal Client - Contract Renewal
    Prospect:
      type: object
      description: Serializer for Prospect model.
      properties:
        id:
          type: integer
          readOnly: true
        lead:
          type: integer
          nullable: true
          description: Original lead that created this prospect
        lead_company:
          type: string
          readOnly: true
        company_name:
          type: string
          maxLength: 255
        industry:
          type: string
          maxLength: 100
        website:
          type: string
          format: uri
          maxLength: 200
        employee_count:
          type: integer
          nullable: true
        annual_revenue:
          type: string
          format: decimal
          pattern: ^-?\d{0,13}(?:\.\d{0,2})?$
          nullable: true
          description: Estimated annual revenue
        primary_contact_name:
          type: string
          maxLength: 255
        primary_contact_email:
          type: string
          format: email
          maxLength: 254
        primary_contact_phone:
          type: string
          maxLength: 50
        primary_contact_title:
          type: string
          maxLength: 100
        street_address:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        country:
          type: string
          maxLength: 100
        pipeline_stage:
          $ref: '#/components/schemas/PipelineStageEnum'
        probability:
          type: integer
          description: Win probability percentage (0-100)
        estimated_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Estimated deal value
        close_date_estimate:
          type: string
          format: date
          description: Expected close date
        assigned_to:
          type: integer
          nullable: true
          description: Account executive assigned
        assigned_to_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        last_activity_date:
          type: string
          format: date
          nullable: true
        won_date:
          type: string
          format: date
          readOnly: true
          nullable: true
        lost_date:
          type: string
          format: date
          readOnly: true
          nullable: true
        lost_reason:
          type: string
          maxLength: 255
        notes:
          type: string
      required:
      - assigned_to_name
      - close_date_estimate
      - company_name
      - created_at
      - estimated_value
      - id
      - lead_company
      - lost_date
      - primary_contact_email
      - primary_contact_name
      - updated_at
      - won_date
    ProspectRequest:
      type: object
      description: Serializer for Prospect model.
      properties:
        lead:
          type: integer
          nullable: true
          description: Original lead that created this prospect
        company_name:
          type: string
          minLength: 1
          maxLength: 255
        industry:
          type: string
          maxLength: 100
        website:
          type: string
          format: uri
          maxLength: 200
        employee_count:
          type: integer
          nullable: true
        annual_revenue:
          type: string
          format: decimal
          pattern: ^-?\d{0,13}(?:\.\d{0,2})?$
          nullable: true
          description: Estimated annual revenue
        primary_contact_name:
          type: string
          minLength: 1
          maxLength: 255
        primary_contact_email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        primary_contact_phone:
          type: string
          maxLength: 50
        primary_contact_title:
          type: string
          maxLength: 100
        street_address:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        country:
          type: string
          minLength: 1
          maxLength: 100
        pipeline_stage:
          $ref: '#/components/schemas/PipelineStageEnum'
        probability:
          type: integer
          description: Win probability percentage (0-100)
        estimated_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Estimated deal value
        close_date_estimate:
          type: string
          format: date
          description: Expected close date
        assigned_to:
          type: integer
          nullable: true
          description: Account executive assigned
        last_activity_date:
          type: string
          format: date
          nullable: true
        lost_reason:
          type: string
          maxLength: 255
        notes:
          type: string
      required:
      - close_date_estimate
      - company_name
      - estimated_value
      - primary_contact_email
      - primary_contact_name
    Register:
      type: object
      description: Serializer for user registration.
      properties:
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
      required:
      - email
      - first_name
      - last_name
      - username
    RegisterRequest:
      type: object
      description: Serializer for user registration.
      properties:
        username:
          type: string
          minLength: 1
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        password:
          type: string
          writeOnly: true
          minLength: 1
        password2:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - email
      - first_name
      - last_name
      - password
      - password2
      - username
    RoleEnum:
      enum:
      - admin
      - member
      - viewer
      type: string
      description: |-
        * `admin` - Client Admin
        * `member` - Client Member
        * `viewer` - View Only
    SourceEnum:
      enum:
      - website
      - referral
      - campaign
      - cold_outreach
      - event
      - partnership
      - other
      type: string
      description: |-
        * `website` - Website Form
        * `referral` - Referral
        * `campaign` - Marketing Campaign
        * `cold_outreach` - Cold Outreach
        * `event` - Event/Conference
        * `partnership` - Partnership
        * `other` - Other
    Status452Enum:
      enum:
      - planning
      - in_progress
      - on_hold
      - completed
      - cancelled
      type: string
      description: |-
        * `planning` - Planning
        * `in_progress` - In Progress
        * `on_hold` - On Hold
        * `completed` - Completed
        * `cancelled` - Cancelled
    Status619Enum:
      enum:
      - current
      - completed
      - renewed
      type: string
      description: |-
        * `current` - Current Engagement
        * `completed` - Completed
        * `renewed` - Renewed
    Status97cEnum:
      enum:
      - draft
      - sent
      - under_review
      - accepted
      - rejected
      - expired
      type: string
      description: |-
        * `draft` - Draft
        * `sent` - Sent
        * `under_review` - Under Review
        * `accepted` - Accepted
        * `rejected` - Rejected
        * `expired` - Expired
    StatusB45Enum:
      enum:
      - draft
      - active
      - completed
      - terminated
      - on_hold
      type: string
      description: |-
        * `draft` - Draft
        * `active` - Active
        * `completed` - Completed
        * `terminated` - Terminated
        * `on_hold` - On Hold
    StatusB4fEnum:
      enum:
      - todo
      - in_progress
      - blocked
      - review
      - done
      type: string
      description: |-
        * `todo` - To Do
        * `in_progress` - In Progress
        * `blocked` - Blocked
        * `review` - In Review
        * `done` - Done
    StatusC6dEnum:
      enum:
      - draft
      - sent
      - paid
      - partial
      - overdue
      - cancelled
      - failed
      - disputed
      - refunded
      - charged_back
      type: string
      description: |-
        * `draft` - Draft
        * `sent` - Sent to Client
        * `paid` - Paid
        * `partial` - Partially Paid
        * `overdue` - Overdue
        * `cancelled` - Cancelled
        * `failed` - Payment Failed
        * `disputed` - Under Dispute
        * `refunded` - Refunded
        * `charged_back` - Charged Back
    Task:
      type: object
      description: Enhanced Task serializer with validation.
      properties:
        id:
          type: integer
          readOnly: true
        project:
          type: integer
        project_name:
          type: string
          readOnly: true
        assigned_to:
          type: integer
          nullable: true
        assigned_to_name:
          type: string
          readOnly: true
          nullable: true
        title:
          type: string
          maxLength: 255
        description:
          type: string
        status:
          $ref: '#/components/schemas/StatusB4fEnum'
        priority:
          $ref: '#/components/schemas/PriorityEnum'
        position:
          type: integer
          description: Position in the Kanban column (lower = higher priority)
        estimated_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
        due_date:
          type: string
          format: date
          nullable: true
        completed_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        hours_logged:
          type: string
          readOnly: true
      required:
      - assigned_to_name
      - completed_at
      - created_at
      - hours_logged
      - id
      - project
      - project_name
      - title
      - updated_at
    TaskRequest:
      type: object
      description: Enhanced Task serializer with validation.
      properties:
        project:
          type: integer
        assigned_to:
          type: integer
          nullable: true
        title:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        status:
          $ref: '#/components/schemas/StatusB4fEnum'
        priority:
          $ref: '#/components/schemas/PriorityEnum'
        position:
          type: integer
          description: Position in the Kanban column (lower = higher priority)
        estimated_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
        due_date:
          type: string
          format: date
          nullable: true
      required:
      - project
      - title
    TimeEntry:
      type: object
      description: Enhanced TimeEntry serializer with validation.
      properties:
        id:
          type: integer
          readOnly: true
        project:
          type: integer
        project_name:
          type: string
          readOnly: true
        task:
          type: integer
          nullable: true
          description: 'Optional: link to specific task'
        task_title:
          type: string
          readOnly: true
          nullable: true
        user:
          type: integer
        user_name:
          type: string
          readOnly: true
        date:
          type: string
          format: date
        hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          description: Hours worked (e.g., 1.5 for 90 minutes)
        description:
          type: string
          description: What was accomplished during this time
        is_billable:
          type: boolean
        hourly_rate:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          description: Rate at time of entry (may differ from project default)
        billed_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          description: 'Calculated: hours * hourly_rate'
        invoiced:
          type: boolean
          description: Has this time been included in an invoice?
        invoice:
          type: integer
          nullable: true
          description: The invoice that includes this time entry
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - billed_amount
      - created_at
      - date
      - description
      - hourly_rate
      - hours
      - id
      - project
      - project_name
      - task_title
      - updated_at
      - user
      - user_name
    TimeEntryRequest:
      type: object
      description: Enhanced TimeEntry serializer with validation.
      properties:
        project:
          type: integer
        task:
          type: integer
          nullable: true
          description: 'Optional: link to specific task'
        user:
          type: integer
        date:
          type: string
          format: date
        hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          description: Hours worked (e.g., 1.5 for 90 minutes)
        description:
          type: string
          minLength: 1
          description: What was accomplished during this time
        is_billable:
          type: boolean
        hourly_rate:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          description: Rate at time of entry (may differ from project default)
        invoiced:
          type: boolean
          description: Has this time been included in an invoice?
        invoice:
          type: integer
          nullable: true
          description: The invoice that includes this time entry
      required:
      - date
      - description
      - hourly_rate
      - hours
      - project
      - user
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
      required:
      - access
      - refresh
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          minLength: 1
      required:
      - refresh
    TypeEnum:
      enum:
      - email
      - webinar
      - content
      - event
      - social
      - partnership
      - renewal
      - annual_review
      - other
      type: string
      description: |-
        * `email` - Email Campaign
        * `webinar` - Webinar
        * `content` - Content Marketing
        * `event` - Event/Conference
        * `social` - Social Media
        * `partnership` - Partnership
        * `renewal` - Renewal Campaign
        * `annual_review` - Annual Review
        * `other` - Other
    Version:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        document_name:
          type: string
          readOnly: true
        version_number:
          type: integer
        change_summary:
          type: string
          description: What changed in this version?
        file_type:
          type: string
          maxLength: 50
        file_size_bytes:
          type: integer
        s3_key:
          type: string
          description: Encrypted S3 object key for this version (unique per firm)
        s3_bucket:
          type: string
        s3_fingerprint:
          type: string
          readOnly: true
          default: ''
          description: Deterministic fingerprint for version content
        created_at:
          type: string
          format: date-time
          readOnly: true
        firm:
          type: integer
          description: Firm (workspace) this version belongs to
        document:
          type: integer
        uploaded_by:
          type: integer
          nullable: true
      required:
      - created_at
      - document
      - document_name
      - file_size_bytes
      - file_type
      - firm
      - id
      - s3_bucket
      - s3_fingerprint
      - s3_key
      - version_number
    VersionRequest:
      type: object
      properties:
        version_number:
          type: integer
        change_summary:
          type: string
          description: What changed in this version?
        file_type:
          type: string
          minLength: 1
          maxLength: 50
        file_size_bytes:
          type: integer
        s3_key:
          type: string
          minLength: 1
          description: Encrypted S3 object key for this version (unique per firm)
        s3_bucket:
          type: string
          minLength: 1
        firm:
          type: integer
          description: Firm (workspace) this version belongs to
        document:
          type: integer
        uploaded_by:
          type: integer
          nullable: true
      required:
      - document
      - file_size_bytes
      - file_type
      - firm
      - s3_bucket
      - s3_key
      - version_number
    VisibilityEnum:
      enum:
      - internal
      - client
      type: string
      description: |-
        * `internal` - Internal Only
        * `client` - Visible to Client
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: sessionid
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
